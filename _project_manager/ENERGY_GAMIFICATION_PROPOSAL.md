# ğŸ® Energy Gamification & Revenue Model - Analysis & Proposal

**à¹€à¸­à¸à¸ªà¸²à¸£à¸™à¸µà¹‰:** à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸£à¸°à¸šà¸š Daily Rewards, Challenges, à¹à¸¥à¸° Milestones à¹€à¸à¸·à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡à¸£à¸²à¸¢à¹„à¸”à¹‰à¸ˆà¸²à¸ Energy  
**à¸§à¸±à¸™à¸—à¸µà¹ˆ:** 17 à¸.à¸. 2026  
**Status:** ğŸ“‹ Proposal - à¸£à¸­à¸à¸²à¸£à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆ

---

## ğŸ“Š Executive Summary

### Model à¸—à¸µà¹ˆà¹€à¸ªà¸™à¸­à¸¡à¸² (à¸ˆà¸²à¸à¸—à¸µà¹ˆà¸›à¸£à¸¶à¸à¸©à¸²à¸ à¸²à¸¢à¸™à¸­à¸)

**à¸«à¸¥à¸±à¸à¸à¸²à¸£:** à¸ªà¸¡à¸”à¸¸à¸¥à¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡ **à¸¥à¹ˆà¸­à¹ƒà¸«à¹‰à¸à¸¥à¸±à¸šà¹€à¸‚à¹‰à¸²** + **à¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­ energy** + **à¹„à¸¡à¹ˆà¹ƒà¸«à¹‰à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸«à¸¡à¸”à¸à¸³à¸¥à¸±à¸‡**

**à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ 60 à¸§à¸±à¸™:**
- âœ… Normal User (3 à¸„à¸£à¸±à¹‰à¸‡/à¸§à¸±à¸™): à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­à¹€à¸¥à¸¢ â†’ **Retention à¸”à¸µ**
- âœ… Active User (6 à¸„à¸£à¸±à¹‰à¸‡/à¸§à¸±à¸™): à¸‹à¸·à¹‰à¸­ ~1 à¸„à¸£à¸±à¹‰à¸‡/2 à¹€à¸”à¸·à¸­à¸™ â†’ **Conversion à¸”à¸µ**
- âœ… Heavy User (10 à¸„à¸£à¸±à¹‰à¸‡/à¸§à¸±à¸™): à¸‹à¸·à¹‰à¸­ 4-5 à¸„à¸£à¸±à¹‰à¸‡/à¹€à¸”à¸·à¸­à¸™ â†’ **Revenue à¸”à¸µ**

**à¸„à¸³à¹à¸™à¸°à¸™à¸³:** âœ… **Model à¸™à¸µà¹‰à¸”à¸µ - à¸„à¸§à¸£à¸—à¸³!** à¹à¸•à¹ˆà¸•à¹‰à¸­à¸‡à¸¡à¸µ **Admin Panel** à¹à¸¥à¸° **Backend Management System**

---

## ğŸ 1. Daily Rewards System

### 1.1 Daily Check-in

| Challenge | Reward | Purpose |
|-----------|--------|---------|
| Daily Check-in | 1 Free AI (à¹„à¸¡à¹ˆà¸ªà¸°à¸ªà¸¡) | à¸¥à¹ˆà¸­à¹ƒà¸«à¹‰à¹€à¸‚à¹‰à¸²à¹à¸­à¸›à¸—à¸¸à¸à¸§à¸±à¸™ |
| Day 7 Streak | 10 Energy | à¸—à¸³à¹ƒà¸«à¹‰à¸•à¸´à¸”à¹ƒà¸ˆ |
| Day 14 Streak | 15 Energy | à¸¢à¸±à¸‡à¹„à¸‡à¸•à¹‰à¸­à¸‡à¸à¸¥à¸±à¸šà¸¡à¸² |
| Day 30 Streak | 30 Energy + 10% discount | à¸£à¸°à¸”à¸±à¸š "Committed" |
| Day 60 Streak | 45 Energy + 15% discount | à¸£à¸°à¸”à¸±à¸š "Loyal" |

### 1.2 Challenge-Based Rewards

| Challenge | Reward | Frequency |
|-----------|--------|-----------|
| Log 7 meals | 5 Energy | Weekly |
| Use AI 3 times | 5 Energy | Weekly |
| 30-day streak | 60 Energy + 10% discount | Monthly |
| Refer a friend | 15 Energy per friend | Max 2/month |

### 1.3 Milestone Rewards

| Milestone | Reward |
|-----------|--------|
| 500 Energy spent | 15 Energy back (3% cashback) |
| 1000 Energy spent | 30 Energy back (3% cashback) |

### 1.4 Random Bonus

- **5% chance** à¹„à¸”à¹‰ 5-10 Energy à¸—à¸¸à¸à¸§à¸±à¸™ (surprise & delight)

---

## ğŸ“ˆ 2. User Segmentation & Revenue Analysis

### 2.1 à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ 60 à¸§à¸±à¸™

| User Type | Daily Uses | Total Needed | Total Reward | Need to Buy | Frequency |
|-----------|------------|--------------|--------------|-------------|-----------|
| **Normal** | 3 | 180 | 335 | **0** | à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­ âœ“ |
| **Active** | 6 | 360 | 335 | **25** | ~0.4x/month âœ“ |
| **Heavy** | 10 | 600 | 335 | **265** | ~4.4x/month âœ“ |

### 2.2 Revenue Projection

**à¸ªà¸¡à¸¡à¸•à¸´à¸à¸²à¸™:** 10,000 users
- 60% Normal (6,000 users) â†’ à¹„à¸¡à¹ˆà¸‹à¸·à¹‰à¸­ â†’ **0 THB**
- 30% Active (3,000 users) â†’ à¸‹à¸·à¹‰à¸­ 0.5x/60 à¸§à¸±à¸™ â†’ **1,500 purchases**
- 10% Heavy (1,000 users) â†’ à¸‹à¸·à¹‰à¸­ 4.5x/60 à¸§à¸±à¸™ â†’ **4,500 purchases**

**Total:** 6,000 purchases/60 à¸§à¸±à¸™ = **100 purchases/day**

**à¸–à¹‰à¸² package à¹€à¸‰à¸¥à¸µà¹ˆà¸¢ 99 THB:**
- Revenue = 100 Ã— 99 = **9,900 THB/day**
- Monthly = **~297,000 THB/month** (~$8,500)

---

## âœ… 3. à¸ˆà¸¸à¸”à¹à¸‚à¹‡à¸‡ (Strengths)

### 3.1 à¸ªà¸¡à¸”à¸¸à¸¥à¸”à¸µ - à¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡ User Segment à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- âœ… Normal User à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­ â†’ **retention à¸ªà¸¹à¸‡**
- âœ… Active User à¸‹à¸·à¹‰à¸­à¸™à¸²à¸™à¹† à¸„à¸£à¸±à¹‰à¸‡ â†’ **conversion à¸à¸³à¸¥à¸±à¸‡à¸”à¸µ**
- âœ… Heavy User à¸‹à¸·à¹‰à¸­à¸šà¹ˆà¸­à¸¢ â†’ **revenue stream à¸¡à¸±à¹ˆà¸™à¸„à¸‡**

### 3.2 Habit Loop à¸­à¸­à¸à¹à¸šà¸šà¸”à¸µ
- **Daily Check-in** â†’ à¸ªà¸£à¹‰à¸²à¸‡à¸™à¸´à¸ªà¸±à¸¢à¹€à¸‚à¹‰à¸²à¹à¸­à¸›à¸—à¸¸à¸à¸§à¸±à¸™
- **Streak System** â†’ FOMO (à¸à¸¥à¸±à¸§à¸à¸¥à¸²à¸” streak)
- **Weekly Challenge** â†’ à¸¡à¸µ micro-goal à¹ƒà¸«à¹‰à¸—à¸³
- **Milestone Rewards** â†’ long-term retention

### 3.3 à¹„à¸¡à¹ˆ Aggressive à¹€à¸à¸´à¸™à¹„à¸›
- Normal user à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸ªà¸¶à¸à¸–à¸¹à¸ paywall à¸à¸µà¸”à¸à¸±à¸™
- à¸¡à¸µ free energy à¸«à¸¡à¸¸à¸™à¹€à¸§à¸µà¸¢à¸™à¸•à¸¥à¸­à¸”
- Heavy user à¸¢à¸±à¸‡à¸£à¸¹à¹‰à¸ªà¸¶à¸à¸„à¸¸à¹‰à¸¡à¸„à¹ˆà¸² (à¹„à¸”à¹‰ discount + milestone cashback)

### 3.4 Viral Loop (Referral)
- Refer a friend â†’ à¹„à¸”à¹‰ 15 Energy
- à¸ˆà¸³à¸à¸±à¸” 2 à¸„à¸™/à¹€à¸”à¸·à¸­à¸™ â†’ à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ abuse à¹à¸•à¹ˆà¸¢à¸±à¸‡à¸¡à¸µ incentive

---

## âš ï¸ 4. à¸ˆà¸¸à¸”à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸£à¸°à¸§à¸±à¸‡ (Concerns)

### 4.1 Complexity à¸ªà¸¹à¸‡ - à¸•à¹‰à¸­à¸‡ Track à¸«à¸¥à¸²à¸¢à¸­à¸¢à¹ˆà¸²à¸‡

```
à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡ track à¸•à¹ˆà¸­ user:
âœ“ Daily check-in streak (7, 14, 30, 60 à¸§à¸±à¸™)
âœ“ Last check-in date
âœ“ Weekly challenges progress (log meals: 3/7, use AI: 2/3)
âœ“ Monthly challenges
âœ“ Milestone spent (500, 1000 Energy)
âœ“ Referral quota (2/month)
âœ“ Random daily bonus history
âœ“ Discount entitlement (10%, 15%)
```

**à¸œà¸¥à¸à¸£à¸°à¸—à¸š:**
- Backend logic à¸‹à¸±à¸šà¸‹à¹‰à¸­à¸™
- à¸•à¹‰à¸­à¸‡à¸¡à¸µ cron job à¸£à¸±à¸™ daily/weekly/monthly
- Database schema à¸•à¹‰à¸­à¸‡à¸­à¸­à¸à¹à¸šà¸šà¸”à¸µ

### 4.2 Discount Stacking à¸•à¹‰à¸­à¸‡ Clarify

**à¸„à¸³à¸–à¸²à¸¡:**
- Day 30: 10% discount + Day 60: 15% discount
- à¸–à¹‰à¸² user streak 60 à¸§à¸±à¸™ à¹à¸¥à¹‰à¸§à¹ƒà¸Šà¹‰ discount **à¸—à¸±à¹‰à¸‡à¸ªà¸­à¸‡à¸­à¸¢à¹ˆà¸²à¸‡à¸à¸£à¹‰à¸­à¸¡à¸à¸±à¸™à¹„à¸”à¹‰à¹„à¸«à¸¡?** 
- Discount **à¹ƒà¸Šà¹‰à¹„à¸”à¹‰à¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§** à¸«à¸£à¸·à¸­ **à¹ƒà¸Šà¹‰à¹„à¸”à¹‰à¸•à¸¥à¸­à¸”à¸Šà¸µà¸§à¸´à¸•?**  

**à¸‚à¹‰à¸­à¹€à¸ªà¸™à¸­à¹à¸™à¸°:**
```
Option 1: Discount à¹ƒà¸Šà¹‰à¹„à¸”à¹‰à¸•à¸¥à¸­à¸” (à¹à¸•à¹ˆà¹„à¸¡à¹ˆ stack)
â†’ Day 60 à¹„à¸”à¹‰ 15% discount à¹à¸—à¸™ 10%

 à¸–à¸²à¸¡à¸à¸¥à¸±à¸š- à¹à¸•à¹ˆà¸–à¹‰à¸²à¹€à¸„à¹‰à¸²à¸«à¸¢à¸¸à¸”à¹€à¸‚à¹‰à¸²à¹à¸­à¸›à¹„à¸›à¸ªà¸±à¸ 1- 2 à¸§à¸±à¸™à¸¥à¸°à¸ˆà¸°à¸—à¸³à¸¢à¸±à¸‡à¹„à¸‡à¸ªà¸´à¸—à¸˜à¹Œà¸«à¸¥à¸¸à¸”à¹€à¸¥à¸¢à¸¡à¸±à¹Šà¸¢à¸«à¸£à¸·à¸­à¹€à¸›à¹‡à¸™ royal user à¹à¸¥à¹‰à¸§à¸à¹‡à¹€à¸›à¹‡à¸™ royal à¹„à¸› ?à¹€à¸à¸£à¸°à¸²à¸¡à¸±à¸™à¸à¹‡à¸¢à¸²à¸à¸­à¸¢à¸¹à¹ˆà¸™à¸°à¸—à¸µà¹ˆà¸ˆà¸°à¹€à¸‚à¹‰à¸²à¸¡à¸²à¹ƒà¸Šà¹‰à¸—à¸¸à¸à¸§à¸±à¸™à¸•à¸´à¸”à¸•à¹ˆà¸­à¸à¸±à¸™ 2 à¹€à¸”à¸·à¸­à¸™
```

### 4.3 "1 Free AI à¸•à¹ˆà¸­à¸§à¸±à¸™ à¹„à¸¡à¹ˆà¸ªà¸°à¸ªà¸¡" à¸­à¸²à¸ˆà¸ªà¸£à¹‰à¸²à¸‡à¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¸¢à¸”à¸²à¸¢

**à¸›à¸±à¸à¸«à¸²:**
- User check-in à¹à¸¥à¹‰à¸§à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰ AI â†’ à¸£à¸¹à¹‰à¸ªà¸¶à¸ "à¹€à¸ªà¸µà¸¢à¸‚à¸­à¸‡à¸Ÿà¸£à¸µ"
- à¸ªà¸£à¹‰à¸²à¸‡ pressure à¹ƒà¸«à¹‰à¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰ AI à¸—à¸¸à¸à¸§à¸±à¸™ (à¸­à¸²à¸ˆà¸à¸¥à¸²à¸¢à¹€à¸›à¹‡à¸™ chore)

**à¸‚à¹‰à¸­à¹€à¸ªà¸™à¸­à¹à¸™à¸°:**
```
âœ… "Daily Free AI - à¹ƒà¸Šà¹‰à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰à¸à¹‡à¹„à¸”à¹‰"
â†’ à¹ƒà¸«à¹‰ streak à¸§à¸´à¹ˆà¸‡à¸•à¹ˆà¸­à¹„à¸”à¹‰ à¹à¸¡à¹‰à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰ AI
â†’ à¹€à¸™à¹‰à¸™à¸—à¸µà¹ˆ "à¹€à¸‚à¹‰à¸²à¹à¸­à¸›" à¸¡à¸²à¸à¸à¸§à¹ˆà¸² "à¹ƒà¸Šà¹‰ AI"

à¸«à¸£à¸·à¸­

âœ… "Free AI à¸ªà¸°à¸ªà¸¡à¹„à¸”à¹‰à¸ªà¸¹à¸‡à¸ªà¸¸à¸” 3 à¸„à¸£à¸±à¹‰à¸‡"
â†’ User à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¹„à¸”à¹‰à¹ƒà¸Šà¹‰à¸—à¸¸à¸à¸§à¸±à¸™à¸à¹‡à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸ªà¸¶à¸à¹€à¸ªà¸µà¸¢
â†’ Weekend user à¸¢à¸±à¸‡à¸¡à¸µ free AI à¹ƒà¸Šà¹‰

à¸œà¸¡à¸‚à¸­à¹€à¸ªà¸™à¸­à¸§à¹ˆà¸²à¹ƒà¸«à¹‰à¹€à¸›à¹‡à¸™à¸à¸²à¸£à¸à¸” ai à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸‚à¸­à¸‡à¸§à¸±à¸™à¸ˆà¸°à¹„à¸¡à¹ˆà¸„à¸´à¸” energy à¸ˆà¸°à¸‡à¹ˆà¸²à¸¢à¸à¸§à¹ˆà¸²à¸¡à¸±à¹Šà¸¢à¸„à¸£à¸±à¸š à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸à¸£à¸°à¸—à¸šà¸à¸±à¸šà¸¢à¸­à¸” energy à¸”à¹‰à¸§à¸¢
```

### 4.4 Weekly Challenge à¸­à¸²à¸ˆ Conflict à¸à¸±à¸š Energy

**à¸›à¸±à¸à¸«à¸²:**
- Challenge: "Use AI 3 times/week"
- à¸–à¹‰à¸² energy à¸«à¸¡à¸” â†’ à¸—à¸³ challenge à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ
- à¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­ energy à¹€à¸à¸·à¹ˆà¸­à¹„à¸”à¹‰ 5 energy à¸Ÿà¸£à¸µ (à¹„à¸¡à¹ˆà¸„à¸¸à¹‰à¸¡!)

**à¸‚à¹‰à¸­à¹€à¸ªà¸™à¸­à¹à¸™à¸°:**
```
âœ… à¹ƒà¸Šà¹‰ "Daily Free AI" à¹„à¸”à¹‰à¹€à¸à¸·à¹ˆà¸­à¸—à¸³ challenge
â†’ challenge à¸™à¸±à¸šà¸—à¸±à¹‰à¸‡ paid + free AI



---

## ğŸ—ï¸ 5. Backend Architecture Proposal

### 5.1 à¸•à¹‰à¸­à¸‡à¸¡à¸µ Admin Panel à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?

**à¸„à¸³à¸•à¸­à¸š: âœ… à¸„à¸§à¸£à¸¡à¸µ Admin Panel (à¸ˆà¸³à¹€à¸›à¹‡à¸™à¸¡à¸²à¸!)**

#### à¹€à¸«à¸•à¸¸à¸œà¸¥:

**1. Real-time Monitoring à¸ˆà¸³à¹€à¸›à¹‡à¸™**
```
Dashboard à¸„à¸§à¸£à¸¡à¸µ:
âœ“ Daily active users (DAU)
âœ“ Energy consumption rate
âœ“ Purchase conversion rate
âœ“ Streak distribution (à¸à¸µà¹ˆà¸„à¸™à¸–à¸¶à¸‡ Day 7, 14, 30, 60)
âœ“ Challenge completion rate
âœ“ Revenue per user segment
âœ“ Fraud detection (à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹‚à¸à¸‡ streak/referral)
```

**2. A/B Testing & Tweaking**
```
à¸›à¸£à¸±à¸šà¸„à¹ˆà¸²à¹„à¸”à¹‰à¹‚à¸”à¸¢à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡ deploy:
âœ“ à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ Day 7 reward à¸ˆà¸²à¸ 10 â†’ 15 Energy
âœ“ à¸›à¸£à¸±à¸š discount rate
âœ“ à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ challenge requirement (7 meals â†’ 5 meals)
âœ“ à¸›à¸´à¸”/à¹€à¸›à¸´à¸” feature à¸Šà¸±à¹ˆà¸§à¸„à¸£à¸²à¸§ (à¹€à¸Šà¹ˆà¸™ random bonus)
```

**3. Customer Support**
```
Admin à¸•à¹‰à¸­à¸‡à¸—à¸³à¹„à¸”à¹‰:
âœ“ à¸”à¸¹ energy balance à¸‚à¸­à¸‡ user (by deviceId)
âœ“ à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´ transaction
âœ“ Manual top-up energy (à¸à¸£à¸“à¸µ bug/à¸‚à¸­à¸­à¸ à¸±à¸¢)
âœ“ à¸”à¸¹ streak à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™
âœ“ Reset streak (à¸à¸£à¸“à¸µà¸à¸´à¹€à¸¨à¸© - à¸„à¸™à¸¥à¸²à¸›à¹ˆà¸§à¸¢)
```

**4. Fraud Prevention**
```
à¸•à¹‰à¸­à¸‡à¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸š:
âœ“ Referral abuse (à¸ªà¸£à¹‰à¸²à¸‡ account à¸›à¸¥à¸­à¸¡à¸¡à¸² refer)
âœ“ Multi-device abuse (reset deviceId à¸‹à¹‰à¸³à¹†)
âœ“ Suspicious energy top-up patterns
âœ“ Time manipulation (à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹€à¸§à¸¥à¸²à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¹‚à¸à¸‡ streak)
```

---

### 5.2 Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Flutter App (Client)                   â”‚
â”‚  ================================        â”‚
â”‚  - Read balance (cached)                â”‚
â”‚  - Display UI & countdown timers        â”‚
â”‚  - Call Cloud Functions                 â”‚
â”‚  - Local streak tracking (sync later)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ â†‘ HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cloud Functions (Firebase)             â”‚
â”‚  ================================        â”‚
â”‚  - analyzeFood (-1 energy)              â”‚
â”‚  - claimDailyReward (+1 Free AI)        â”‚
â”‚  - completeChallenge (+5 energy)        â”‚
â”‚  - claimMilestone (+15/30 energy)       â”‚
â”‚  - claimReferral (+15 energy)           â”‚
â”‚  - verifyPurchase (+energy)             â”‚
â”‚  - syncBalance (startup)                â”‚
â”‚  - getChallengeProgress                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ â†‘ Firestore SDK
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Firestore Database                     â”‚
â”‚  ================================        â”‚
â”‚  Collection: users/{deviceId}           â”‚
â”‚  {                                      â”‚
â”‚    balance: 150,                        â”‚
â”‚    dailyStreak: 14,                     â”‚
â”‚    lastCheckIn: '2026-02-17',          â”‚
â”‚    freeAiToday: true,                  â”‚
â”‚    challenges: {                        â”‚
â”‚      weekly: {                          â”‚
â”‚        logMeals: 3,      // /7         â”‚
â”‚        useAi: 2,         // /3         â”‚
â”‚        resetAt: '2026-02-23'           â”‚
â”‚      }                                  â”‚
â”‚    },                                   â”‚
â”‚    milestones: {                        â”‚
â”‚      spent500: false,                   â”‚
â”‚      spent1000: false,                  â”‚
â”‚      totalSpent: 245                    â”‚
â”‚    },                                   â”‚
â”‚    referrals: {                         â”‚
â”‚      count: 1,           // /2         â”‚
â”‚      resetAt: '2026-03-01',            â”‚
â”‚      referred: ['deviceId1']           â”‚
â”‚    },                                   â”‚
â”‚    discounts: {                         â”‚
â”‚      day30: { active: true, rate: 0.1 },â”‚
â”‚      day60: { active: false, rate: 0.15 }â”‚
â”‚    }                                    â”‚
â”‚  }                                      â”‚
â”‚                                         â”‚
â”‚  Collection: transactions/{txId}        â”‚
â”‚  Collection: config/rewards             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ â†‘ Firestore SDK
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin Panel (Next.js / React)          â”‚
â”‚  ================================        â”‚
â”‚  Deploy: Cloud Run / Vercel             â”‚
â”‚  Auth: Firebase Admin SDK               â”‚
â”‚  --------------------------------       â”‚
â”‚  Pages:                                 â”‚
â”‚  - Dashboard (metrics & charts)         â”‚
â”‚  - User lookup (deviceId search)        â”‚
â”‚  - Manual operations (top-up, reset)    â”‚
â”‚  - Config management (rewards tuning)   â”‚
â”‚  - Fraud detection (alerts & bans)      â”‚
â”‚  - A/B testing (feature flags)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 5.3 Backend Structure

```
functions/
  src/
    energy/
      dailyReward.ts        # POST /claimDailyReward
      challenge.ts          # POST /completeChallenge
      milestone.ts          # POST /claimMilestone
      referral.ts           # POST /claimReferral
      syncBalance.ts        # POST /syncBalance (existing)
    admin/
      getUser.ts            # GET  /admin/user/:deviceId
      getAllUsers.ts        # GET  /admin/users (pagination)
      manualTopup.ts        # POST /admin/topup
      resetStreak.ts        # POST /admin/resetStreak
      getMetrics.ts         # GET  /admin/metrics
      updateConfig.ts       # POST /admin/config
      flagFraud.ts          # POST /admin/fraud/flag
    analyzeFood.ts          # (existing)
    verifyPurchase.ts       # (existing)
    
    cron/
      resetWeeklyChallenges.ts    # à¸—à¸¸à¸à¸§à¸±à¸™à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œ 00:00
      resetMonthlyChallenges.ts   # à¸—à¸¸à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ 1 00:00
      cleanupExpiredData.ts       # à¸—à¸¸à¸à¸§à¸±à¸™ 02:00
      calculateMetrics.ts         # à¸—à¸¸à¸à¸§à¸±à¸™ 03:00

admin-panel/
  pages/
    index.tsx               # Dashboard
    users/
      index.tsx             # User list
      [deviceId].tsx        # User detail
    config/
      rewards.tsx           # Reward configuration
      features.tsx          # Feature flags
    fraud/
      index.tsx             # Fraud alerts
      [userId].tsx          # Fraud investigation
    analytics/
      revenue.tsx           # Revenue charts
      retention.tsx         # Retention charts
  components/
    UserCard.tsx
    MetricCard.tsx
    ChartWrapper.tsx
```

---

### 5.4 Firestore Schema (à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”)

```typescript
// Collection: users/{deviceId}
interface UserEnergyProfile {
  // Basic
  deviceId: string;
  balance: number;
  totalEarned: number;
  totalSpent: number;
  totalPurchased: number;
  createdAt: Timestamp;
  lastUpdated: Timestamp;

  // Daily Check-in
  dailyStreak: number;            // 0, 1, 2, ..., 60
  lastCheckIn: string;            // 'YYYY-MM-DD'
  longestStreak: number;          // à¸ªà¸–à¸´à¸•à¸´ streak à¸—à¸µà¹ˆà¸¢à¸²à¸§à¸—à¸µà¹ˆà¸ªà¸¸à¸”
  freeAiToday: boolean;           // à¹ƒà¸Šà¹‰ Free AI à¸§à¸±à¸™à¸™à¸µà¹‰à¹à¸¥à¹‰à¸§à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡

  // Weekly Challenges
  challenges: {
    weekly: {
      logMeals: number;           // 0-7
      useAi: number;              // 0-3
      resetAt: string;            // 'YYYY-MM-DD' (à¸§à¸±à¸™à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œà¸«à¸™à¹‰à¸²)
      completed: string[];        // ['logMeals', 'useAi']
      claimedRewards: string[];   // ['logMeals', 'useAi']
    };
    monthly: {
      streak30: boolean;          // à¸„à¸£à¸š 30 à¸§à¸±à¸™à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡
      claimed30: boolean;         // à¹€à¸„à¸¥à¸¡à¹à¸¥à¹‰à¸§à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡
    };
  };

  // Milestones
  milestones: {
    spent500: boolean;            // à¹€à¸„à¸¢à¸„à¸£à¸š 500 à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡
    spent1000: boolean;           // à¹€à¸„à¸¢à¸„à¸£à¸š 1000 à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡
    totalSpent: number;           // à¸ˆà¸³à¸™à¸§à¸™ energy à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¹„à¸›à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
  };

  // Referrals
  referrals: {
    count: number;                // 0-2 (reset à¸—à¸¸à¸à¹€à¸”à¸·à¸­à¸™)
    maxPerMonth: number;          // 2 (configurable)
    resetAt: string;              // 'YYYY-MM-01'
    referred: string[];           // [deviceId1, deviceId2]
    referredBy: string | null;    // deviceId à¸‚à¸­à¸‡à¸„à¸™à¸Šà¸§à¸™
  };

  // Discounts
  discounts: {
    day30: { active: boolean; rate: number; usedCount: number; };
    day60: { active: boolean; rate: number; usedCount: number; };
  };

  // Random Bonus
  lastRandomBonus: string | null; // 'YYYY-MM-DD'
  randomBonusCount: number;       // à¸ªà¸–à¸´à¸•à¸´

  // Fraud Detection
  flags: {
    suspicious: boolean;
    reason: string | null;
    flaggedAt: Timestamp | null;
  };
}

// Collection: transactions/{txId}
interface EnergyTransaction {
  id: string;
  deviceId: string;
  type: 'usage' | 'purchase' | 'daily_reward' | 'challenge' | 'milestone' | 'referral' | 'random_bonus';
  amount: number;                 // +/- amount
  balanceAfter: number;
  description: string;
  metadata: {
    packageId?: string;
    purchaseToken?: string;
    challengeType?: string;
    milestoneType?: string;
  };
  createdAt: Timestamp;
}

// Collection: config/rewards
interface RewardsConfig {
  dailyCheckIn: {
    day1: { energy: 0, freeAi: 1 };
    day7: { energy: 10 };
    day14: { energy: 15 };
    day30: { energy: 30, discount: 0.1 };
    day60: { energy: 45, discount: 0.15 };
  };
  challenges: {
    logMeals: { target: 7, reward: 5 };
    useAi: { target: 3, reward: 5 };
    streak30: { reward: 60, discount: 0.1 };
  };
  milestones: {
    spent500: { reward: 15 };
    spent1000: { reward: 30 };
  };
  referral: {
    reward: 15;
    maxPerMonth: 2;
  };
  randomBonus: {
    chance: 0.05;           // 5%
    minReward: 5;
    maxReward: 10;
  };
}
```

---

## ğŸ” 6. Security & Anti-Cheat

### 6.1 à¸Šà¹ˆà¸­à¸‡à¹‚à¸«à¸§à¹ˆà¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸›à¹‰à¸­à¸‡à¸à¸±à¸™

#### ğŸš¨ **1. Client-side Manipulation**

**à¸›à¸±à¸à¸«à¸²:** Client à¸ªà¹ˆà¸‡ request à¸›à¸¥à¸­à¸¡ claim reward à¸‹à¹‰à¸³à¹†

**à¸§à¸´à¸˜à¸µà¸›à¹‰à¸­à¸‡à¸à¸±à¸™:**
```typescript
// âŒ à¸­à¸¢à¹ˆà¸²à¹ƒà¸«à¹‰ client à¸„à¸³à¸™à¸§à¸“ reward à¹€à¸­à¸‡
// Client à¸„à¸§à¸£à¹à¸„à¹ˆà¸ªà¹ˆà¸‡ request â†’ Server à¸•à¸±à¸”à¸ªà¸´à¸™à¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡

// âœ… à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ (Cloud Function)
export const claimDailyReward = functions.https.onCall(async (data, context) => {
  const { deviceId } = data;
  
  // 1. Load user data
  const userRef = db.collection('users').doc(deviceId);
  const user = await userRef.get();
  
  // 2. Server-side validation
  const today = new Date().toISOString().split('T')[0];
  if (user.data().lastCheckIn === today) {
    throw new Error('Already claimed today');
  }
  
  // 3. Calculate streak (Server decides!)
  const lastCheckIn = user.data().lastCheckIn;
  const streak = calculateStreak(lastCheckIn, today);
  
  // 4. Calculate reward (Server decides!)
  const reward = getStreakReward(streak);
  
  // 5. Update database (atomic transaction)
  await db.runTransaction(async (t) => {
    t.update(userRef, {
      dailyStreak: streak,
      lastCheckIn: today,
      balance: user.data().balance + reward.energy,
      freeAiToday: false,
    });
  });
  
  return { success: true, streak, reward };
});
```

#### ğŸš¨ **2. Time Manipulation**

**à¸›à¸±à¸à¸«à¸²:** User à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹€à¸§à¸¥à¸²à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¹‚à¸à¸‡ streak

**à¸§à¸´à¸˜à¸µà¸›à¹‰à¸­à¸‡à¸à¸±à¸™:**
```typescript
// à¹ƒà¸Šà¹‰ Server timestamp à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
const serverTime = admin.firestore.FieldValue.serverTimestamp();

// Validate client timestamp
if (Math.abs(clientTime - serverTime) > 5 * 60 * 1000) {
  throw new Error('Invalid timestamp - possible time manipulation');
}

// à¹€à¸Šà¹‡à¸„ streak à¸”à¹‰à¸§à¸¢ server time
const today = new Date(serverTime).toISOString().split('T')[0];
```

#### ğŸš¨ **3. Referral Abuse**

**à¸›à¸±à¸à¸«à¸²:** User à¸ªà¸£à¹‰à¸²à¸‡ account à¸›à¸¥à¸­à¸¡à¸¡à¸² refer à¸•à¸±à¸§à¹€à¸­à¸‡

**à¸§à¸´à¸˜à¸µà¸›à¹‰à¸­à¸‡à¸à¸±à¸™:**
```typescript
export const claimReferral = functions.https.onCall(async (data, context) => {
  const { referrerId, newUserId } = data;
  
  // 1. à¹€à¸Šà¹‡à¸„ IP address
  const referrerIp = context.rawRequest.ip;
  const newUserIp = await getIpFromDeviceId(newUserId);
  
  if (referrerIp === newUserIp) {
    await flagFraud(referrerId, 'Same IP as referred user');
    throw new Error('Invalid referral');
  }
  
  // 2. à¹€à¸Šà¹‡à¸„à¸§à¹ˆà¸² newUser à¹ƒà¸Šà¹‰ AI à¸ˆà¸£à¸´à¸‡à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡ (3 à¸„à¸£à¸±à¹‰à¸‡)
  const newUserData = await db.collection('users').doc(newUserId).get();
  const usageCount = newUserData.data().totalSpent || 0;
  
  if (usageCount < 3) {
    throw new Error('Referred user must use AI at least 3 times');
  }
  
  // 3. à¹€à¸Šà¹‡à¸„ quota (2/month)
  const referrerData = await db.collection('users').doc(referrerId).get();
  if (referrerData.data().referrals.count >= 2) {
    throw new Error('Referral quota exceeded');
  }
  
  // 4. à¹€à¸Šà¹‡à¸„à¸§à¹ˆà¸²à¹€à¸„à¸¢ refer user à¸™à¸µà¹‰à¹à¸¥à¹‰à¸§à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡
  if (referrerData.data().referrals.referred.includes(newUserId)) {
    throw new Error('Already referred this user');
  }
  
  // 5. Award reward
  await awardReferralReward(referrerId, newUserId);
});
```

#### ğŸš¨ **4. Multi-device Abuse**

**à¸›à¸±à¸à¸«à¸²:** User à¸¥à¸šà¹à¸­à¸›à¹à¸¥à¹‰à¸§à¸¥à¸‡à¹ƒà¸«à¸¡à¹ˆ à¹€à¸à¸·à¹ˆà¸­à¹„à¸”à¹‰ welcome gift à¸‹à¹‰à¸³

**à¸§à¸´à¸˜à¸µà¸›à¹‰à¸­à¸‡à¸à¸±à¸™:**
```typescript
// à¹ƒà¸Šà¹‰ multiple identifiers
- Device ID (primary)
- iOS: identifierForVendor
- Android: ANDROID_ID
- Store in Firebase UID (if signed in)
- Track installation ID

// Backend check
const identifiers = [
  data.deviceId,
  data.vendorId,
  data.androidId,
];

for (const id of identifiers) {
  const existing = await db.collection('users')
    .where('identifiers', 'array-contains', id)
    .get();
  
  if (!existing.empty) {
    throw new Error('Device already registered');
  }
}
```

#### ğŸš¨ **5. Challenge Manipulation**

**à¸›à¸±à¸à¸«à¸²:** Client à¸ªà¹ˆà¸‡ request claim challenge à¹‚à¸”à¸¢à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸—à¸³à¸ˆà¸£à¸´à¸‡

**à¸§à¸´à¸˜à¸µà¸›à¹‰à¸­à¸‡à¸à¸±à¸™:**
```typescript
export const completeChallenge = functions.https.onCall(async (data, context) => {
  const { deviceId, challengeType } = data;
  
  // à¹„à¸¡à¹ˆà¹€à¸Šà¸·à¹ˆà¸­ client! Server à¸•à¹‰à¸­à¸‡ verify à¹€à¸­à¸‡
  const userData = await db.collection('users').doc(deviceId).get();
  const progress = userData.data().challenges.weekly[challengeType];
  
  // à¹€à¸Šà¹‡à¸„ progress à¸ˆà¸²à¸ database
  if (challengeType === 'logMeals' && progress < 7) {
    throw new Error(`Challenge not completed: ${progress}/7`);
  }
  
  if (challengeType === 'useAi' && progress < 3) {
    throw new Error(`Challenge not completed: ${progress}/3`);
  }
  
  // à¹€à¸Šà¹‡à¸„à¸§à¹ˆà¸²à¹€à¸„à¸¥à¸¡à¹à¸¥à¹‰à¸§à¸«à¸£à¸·à¸­à¸¢à¸±à¸‡
  const claimed = userData.data().challenges.weekly.claimedRewards;
  if (claimed.includes(challengeType)) {
    throw new Error('Already claimed this challenge');
  }
  
  // Award reward
  await awardChallengeReward(deviceId, challengeType);
});
```

---

### 6.2 Rate Limiting

```typescript
// Cloud Functions config
export const claimDailyReward = functions
  .runWith({
    maxInstances: 100,
    memory: '256MB',
  })
  .https.onCall(async (data, context) => {
    // Rate limit: 10 requests per minute per user
    const rateLimitKey = `ratelimit:${data.deviceId}`;
    const requestCount = await redis.incr(rateLimitKey);
    
    if (requestCount === 1) {
      await redis.expire(rateLimitKey, 60); // 1 minute
    }
    
    if (requestCount > 10) {
      throw new functions.https.HttpsError(
        'resource-exhausted',
        'Too many requests'
      );
    }
    
    // ... rest of the function
  });
```

---

## ğŸ’¡ 7. à¸‚à¹‰à¸­à¹€à¸ªà¸™à¸­à¹à¸™à¸°à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡

### 7.1 Subscription Model (à¹€à¸à¸´à¹ˆà¸¡à¸£à¸²à¸¢à¹„à¸”à¹‰à¸›à¸£à¸°à¸ˆà¸³)

**à¸›à¸±à¸à¸«à¸²à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™:**
- Heavy users à¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­ energy à¸šà¹ˆà¸­à¸¢à¸¡à¸²à¸ (4-5 à¸„à¸£à¸±à¹‰à¸‡/à¹€à¸”à¸·à¸­à¸™)
- à¸„à¹ˆà¸­à¸™à¸‚à¹‰à¸²à¸‡à¸¢à¸¸à¹ˆà¸‡à¸¢à¸²à¸ à¸™à¹ˆà¸²à¸£à¸³à¸„à¸²à¸

**à¹‚à¸‹à¸¥à¸¹à¸Šà¸±à¸™: Energy Pass (Subscription)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Energy Pass - 149 THB/month             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  âœ“ Unlimited AI analysis                 â”‚
â”‚  âœ“ No energy cost                        â”‚
â”‚  âœ“ Double streak rewards                 â”‚
â”‚  âœ“ Exclusive badge                       â”‚
â”‚  âœ“ Priority support                      â”‚
â”‚  âœ“ Ad-free experience                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**à¸‚à¹‰à¸­à¸”à¸µ:**
- âœ… Revenue predictable (Monthly Recurring Revenue)
- âœ… Heavy users à¸¡à¸µà¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸ (à¸‹à¸·à¹‰à¸­ pass à¸ªà¸°à¸”à¸§à¸à¸à¸§à¹ˆà¸²)
- âœ… Conversion rate à¸ªà¸¹à¸‡à¸‚à¸¶à¹‰à¸™ (à¹€à¸—à¸µà¸¢à¸šà¸à¸±à¸šà¸‹à¸·à¹‰à¸­ 4-5 à¸„à¸£à¸±à¹‰à¸‡/à¹€à¸”à¸·à¸­à¸™)
- âœ… Lifetime Value (LTV) à¸ªà¸¹à¸‡à¸‚à¸¶à¹‰à¸™

**à¸‚à¹‰à¸­à¸„à¸§à¸£à¸£à¸°à¸§à¸±à¸‡:**
- âš ï¸ Normal user à¸­à¸²à¸ˆà¹„à¸¡à¹ˆà¸ªà¸™à¹ƒà¸ˆ (à¹„à¸¡à¹ˆà¸ˆà¸³à¹€à¸›à¹‡à¸™)
- âš ï¸ à¸•à¹‰à¸­à¸‡à¸„à¸´à¸” balance: Pass vs Top-up

**Revenue Comparison (Heavy User):**
```
à¸‹à¸·à¹‰à¸­ Energy: 99 THB Ã— 4.5 à¸„à¸£à¸±à¹‰à¸‡ = 445 THB/month
Energy Pass: 149 THB/month

â†’ User à¸›à¸£à¸°à¸«à¸¢à¸±à¸” 296 THB/month (66% discount!)
â†’ à¹à¸•à¹ˆà¹€à¸£à¸²à¹„à¸”à¹‰ MRR à¸¡à¸±à¹ˆà¸™à¸„à¸‡ + retention à¸ªà¸¹à¸‡à¸‚à¸¶à¹‰à¸™
```

---

### 7.2 Social Features (à¹€à¸à¸´à¹ˆà¸¡ Retention)

```
1. Streak Leaderboard
   - à¹à¸ªà¸”à¸‡ Top 10 users à¸—à¸µà¹ˆ streak à¸¢à¸²à¸§à¸—à¸µà¹ˆà¸ªà¸¸à¸”
   - à¹à¸ªà¸”à¸‡à¸­à¸±à¸™à¸”à¸±à¸šà¸‚à¸­à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡
   â†’ FOMO + Competition

2. Friend Challenge
   - à¸—à¹‰à¸² friend à¸—à¸³ challenge à¸”à¹‰à¸§à¸¢à¸à¸±à¸™
   - à¸–à¹‰à¸²à¸—à¸±à¹‰à¸‡à¸„à¸¹à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ â†’ à¹„à¸”à¹‰ bonus energy
   â†’ Viral loop

3. Share Meal Analysis
   - à¹à¸Šà¸£à¹Œà¸œà¸¥à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸­à¸²à¸«à¸²à¸£à¹„à¸›à¹‚à¸‹à¹€à¸Šà¸µà¸¢à¸¥
   - à¸„à¸™à¹€à¸«à¹‡à¸™à¹à¸¥à¹‰à¸§à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹à¸­à¸› â†’ Organic growth

4. Community Goals
   - "à¸Šà¸²à¸§ MIRO à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸­à¸²à¸«à¸²à¸£à¸„à¸£à¸š 1 à¸¥à¹‰à¸²à¸™à¸„à¸£à¸±à¹‰à¸‡"
   - à¸–à¹‰à¸²à¸–à¸¶à¸‡à¹€à¸›à¹‰à¸² â†’ à¸—à¸¸à¸à¸„à¸™à¹„à¸”à¹‰ 50 Energy
   â†’ Sense of community
```

---

### 7.3 Dynamic Pricing (à¹à¸—à¸™ Discount)

**à¸›à¸±à¸à¸«à¸²:** Discount à¸—à¸³à¹ƒà¸«à¹‰ loyal user à¸ˆà¹ˆà¸²à¸¢à¸™à¹‰à¸­à¸¢à¸¥à¸‡ (à¸‚à¸²à¸”à¸—à¸¸à¸™!)

**à¹‚à¸‹à¸¥à¸¹à¸Šà¸±à¸™: Bonus Energy à¹à¸—à¸™ Discount**

```
Day 30 Reward (à¹€à¸”à¸´à¸¡): 30 Energy + 10% discount
Day 30 Reward (à¹ƒà¸«à¸¡à¹ˆ): 30 Energy + à¸‹à¸·à¹‰à¸­à¹„à¸”à¹‰ Bonus 20%

à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:
à¸‹à¸·à¹‰à¸­ 100 Energy (99 THB)
â†’ à¹„à¸”à¹‰ 100 + 20 = 120 Energy

à¹€à¸—à¸µà¸¢à¸šà¸à¸±à¸š 10% discount:
à¸‹à¸·à¹‰à¸­ 100 Energy (89 THB) â†’ à¹„à¸”à¹‰ 100 Energy

Revenue:
Bonus: 99 THB â†’ à¸ªà¸¹à¸‡à¸à¸§à¹ˆà¸²
Discount: 89 THB â†’ à¸•à¹ˆà¸³à¸à¸§à¹ˆà¸²
```

**à¸‚à¹‰à¸­à¸”à¸µ:**
- âœ… Revenue à¸ªà¸¹à¸‡à¸à¸§à¹ˆà¸² (à¹„à¸¡à¹ˆà¸¥à¸” price)
- âœ… User à¸£à¸¹à¹‰à¸ªà¸¶à¸à¹„à¸”à¹‰à¸¡à¸¹à¸¥à¸„à¹ˆà¸² (bonus energy)
- âœ… Easy to communicate ("+20% Energy")

---

### 7.4 Seasonal Events (Limited-Time)

```
Event: Songkran Week (13-20 à¹€à¸¡à¸©à¸²à¸¢à¸™)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ Double streak rewards
âœ“ Triple challenge rewards
âœ“ Special random bonus (10-20 Energy)
âœ“ Limited edition packages (à¸ªà¸›à¸¥à¸²à¸Šà¸™à¹‰à¸³ theme)

Event: New Year Resolution (1-31 à¸¡à¸à¸£à¸²à¸„à¸¡)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ Log 31 meals â†’ 100 Energy bonus
âœ“ Special discount packages
âœ“ "Healthy 2026" badge
```

**à¸‚à¹‰à¸­à¸”à¸µ:**
- âœ… à¸ªà¸£à¹‰à¸²à¸‡ urgency (FOMO)
- âœ… Re-engage lapsed users
- âœ… Revenue spike à¹ƒà¸™à¸Šà¹ˆà¸§à¸‡ event

---

## ğŸ“‹ 8. Implementation Roadmap

### Phase 1: Core System (Week 1-2)

```
Backend:
âœ“ Firestore schema setup
âœ“ Cloud Functions: claimDailyReward
âœ“ Cloud Functions: completeChallenge (weekly only)
âœ“ Cron job: reset weekly challenges

Frontend:
âœ“ Daily check-in UI
âœ“ Streak display (7, 14 à¸§à¸±à¸™)
âœ“ Weekly challenge progress
âœ“ Claim reward button

Testing:
âœ“ Unit tests (Cloud Functions)
âœ“ Integration tests (E2E flow)
âœ“ Security testing (anti-cheat)
```

### Phase 2: Advanced Features (Week 3-4)

```
Backend:
âœ“ Cloud Functions: claimMilestone
âœ“ Cloud Functions: claimReferral
âœ“ Cloud Functions: randomBonus
âœ“ Cron job: reset monthly challenges
âœ“ Fraud detection logic

Frontend:
âœ“ Milestone progress UI
âœ“ Referral code system
âœ“ Random bonus animation
âœ“ Discount badge display

Testing:
âœ“ Load testing (500 concurrent users)
âœ“ Fraud scenario testing
```

### Phase 3: Admin Panel (Week 5-6)

```
Admin Panel:
âœ“ Dashboard (metrics)
âœ“ User lookup
âœ“ Manual operations
âœ“ Config management
âœ“ Fraud detection UI

Deploy:
âœ“ Cloud Run deployment
âœ“ Firebase Auth integration
âœ“ Admin role setup
âœ“ Monitoring & alerts
```

### Phase 4: Polish & Launch (Week 7-8)

```
âœ“ A/B testing setup
âœ“ Analytics integration
âœ“ Performance optimization
âœ“ User documentation
âœ“ Soft launch (beta testers)
âœ“ Full launch
```

---

## ğŸ“Š 9. Success Metrics (KPIs)

### 9.1 Retention Metrics

```
Target:
âœ“ Day 1 Retention: 40%
âœ“ Day 7 Retention: 20%
âœ“ Day 30 Retention: 10%

Gamification Impact:
âœ“ % users with 7-day streak: 30%
âœ“ % users with 14-day streak: 15%
âœ“ % users with 30-day streak: 5%
```

### 9.2 Engagement Metrics

```
Target:
âœ“ Daily Active Users (DAU): 30% of total users
âœ“ Weekly Active Users (WAU): 50% of total users
âœ“ Average session time: 5 minutes

Gamification Impact:
âœ“ % users who check in daily: 40%
âœ“ % users who complete weekly challenge: 60%
âœ“ Average days between sessions: < 2 days
```

### 9.3 Revenue Metrics

```
Target:
âœ“ Conversion rate (free â†’ paid): 15%
âœ“ ARPU (Average Revenue Per User): 50 THB/month
âœ“ LTV (Lifetime Value): 600 THB

Gamification Impact:
âœ“ % Heavy users: 10%
âœ“ Average purchases per Heavy user: 4.5x/month
âœ“ Referral conversion rate: 20%
```

### 9.4 System Health

```
Monitor:
âœ“ Cloud Functions latency: < 500ms
âœ“ Error rate: < 1%
âœ“ Fraud detection rate: < 0.5%
âœ“ Database costs: < 5,000 THB/month
```

---

## ğŸ¬ 10. Conclusion & Next Steps

### âœ… Final Recommendation

**Model à¸™à¸µà¹‰à¸”à¸µ - à¸„à¸§à¸£à¸—à¸³!**

**à¹€à¸«à¸•à¸¸à¸œà¸¥:**
1. âœ… à¸ªà¸¡à¸”à¸¸à¸¥à¸”à¸µà¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡ retention + conversion + revenue
2. âœ… Normal user à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸ªà¸¶à¸à¸–à¸¹à¸ paywall
3. âœ… Heavy user à¸¢à¸±à¸‡à¸¡à¸µ incentive à¸‹à¸·à¹‰à¸­
4. âœ… Gamification loop à¸ªà¸£à¹‰à¸²à¸‡à¸™à¸´à¸ªà¸±à¸¢ long-term

**à¹à¸•à¹ˆà¸•à¹‰à¸­à¸‡à¸¡à¸µ:**
1. âœ… **Admin Panel** (à¸ˆà¸³à¹€à¸›à¹‡à¸™à¸¡à¸²à¸!)
2. âœ… **Backend Management System**
3. âœ… **Security & Anti-cheat**
4. âœ… **A/B Testing capability**

---

### ğŸš€ Next Steps

**à¸•à¹‰à¸­à¸‡à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆ:**

1. **Discount Strategy**
   - [ ] à¹ƒà¸Šà¹‰ Discount (10%, 15%)
   - [ x] à¹ƒà¸Šà¹‰ Bonus Energy à¹à¸—à¸™ (+20%, +30%)

2. **Daily Free AI**
   - [ x] à¹„à¸¡à¹ˆà¸ªà¸°à¸ªà¸¡ (à¸•à¸²à¸¡ model à¹€à¸”à¸´à¸¡)
   - [ ] à¸ªà¸°à¸ªà¸¡à¹„à¸”à¹‰à¸ªà¸¹à¸‡à¸ªà¸¸à¸” 3 à¸„à¸£à¸±à¹‰à¸‡

3. **Weekly Challenge**
   - [x ] "Use AI 3 times" (à¸•à¹‰à¸­à¸‡à¸¡à¸µ energy)
   - [ ] "Log 7 meals" only (à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰ energy)

4. **Admin Panel Priority**
   - [ ] à¸—à¸³à¸à¸£à¹‰à¸­à¸¡à¸à¸±à¸š Phase 1
   - [ x] à¹€à¸¥à¸·à¹ˆà¸­à¸™à¹„à¸› Phase 3 (à¸«à¸¥à¸±à¸‡à¸ˆà¸²à¸ core features)

5. **Subscription Model**
   - [ ] Launch à¸à¸£à¹‰à¸­à¸¡à¸à¸±à¸™
   - [x ] Launch à¸—à¸µà¸«à¸¥à¸±à¸‡ (Phase 5)

---

### ğŸ“ à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸–à¸±à¸”à¹„à¸›

**à¸–à¹‰à¸²à¸•à¸à¸¥à¸‡à¸ˆà¸°à¸—à¸³:**

1. **à¸­à¸­à¸à¹à¸šà¸š Firestore Schema** (à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”)
2. **à¹€à¸‚à¸µà¸¢à¸™ Cloud Functions** (spec & pseudocode)
3. **à¸­à¸­à¸à¹à¸šà¸š Admin Panel UI** (wireframe)
4. **à¸›à¸£à¸°à¸¡à¸²à¸“à¸à¸²à¸£ cost** (Firebase, Cloud Run)
5. **à¸ªà¸£à¹‰à¸²à¸‡ timeline** (deployment schedule)

---

**à¸„à¸³à¸–à¸²à¸¡?**
- à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ wireframe/mockup à¸‚à¸­à¸‡ UI à¹„à¸«à¸¡?
- à¸•à¹‰à¸­à¸‡à¸à¸²à¸£ pseudocode à¸‚à¸­à¸‡ Cloud Functions à¹„à¸«à¸¡?
- à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸„à¸³à¸™à¸§à¸“ cost estimate à¹„à¸«à¸¡?
à¹„à¸¡à¹ˆà¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸—à¸±à¹‰à¸‡ 3 à¸„à¸³à¸–à¸²à¸¡à¹à¸¥à¸¢

**à¸à¸£à¹‰à¸­à¸¡à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸¡à¸·à¹ˆà¸­à¹„à¸«à¸£à¹ˆà¸à¹‡à¸šà¸­à¸à¹„à¸”à¹‰à¹€à¸¥à¸¢à¸„à¸£à¸±à¸š! ğŸš€**

---
---

# ğŸ” CRITICAL ANALYSIS â€” à¸•à¸­à¸šà¸„à¸³à¸–à¸²à¸¡ + à¸Šà¹ˆà¸­à¸‡à¹‚à¸«à¸§à¹ˆà¸—à¸µà¹ˆà¸à¸š

**à¸§à¸±à¸™à¸—à¸µà¹ˆà¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œ:** 17 à¸.à¸. 2026  
**à¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡:** à¸„à¸³à¸•à¸­à¸šà¸‚à¸­à¸‡à¸„à¸¸à¸“à¹ƒà¸™à¹€à¸­à¸à¸ªà¸²à¸£à¸‚à¹‰à¸²à¸‡à¸šà¸™

---

## ğŸ“Œ à¸ªà¸£à¸¸à¸›à¸à¸²à¸£à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆà¸‚à¸­à¸‡à¸„à¸¸à¸“

| # | à¸›à¸£à¸°à¹€à¸”à¹‡à¸™ | à¸„à¸³à¸•à¸­à¸š |
|---|---------|-------|
| 1 | Discount Strategy | âœ… à¹ƒà¸Šà¹‰ **Bonus Energy** à¹à¸—à¸™ Discount (+20%, +30%) |
| 2 | Daily Free AI | âœ… à¹„à¸¡à¹ˆà¸ªà¸°à¸ªà¸¡ + **à¹€à¸ªà¸™à¸­ "à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸‚à¸­à¸‡à¸§à¸±à¸™à¹„à¸¡à¹ˆà¸„à¸´à¸” energy"** |
| 3 | Weekly Challenge | âœ… "Use AI 3 times" (à¸™à¸±à¸šà¸£à¸§à¸¡ free AI à¸”à¹‰à¸§à¸¢) |
| 4 | Admin Panel | âœ… à¹€à¸¥à¸·à¹ˆà¸­à¸™à¹„à¸› Phase 3 |
| 5 | Subscription | âœ… Launch à¸—à¸µà¸«à¸¥à¸±à¸‡ (Phase 5) |

---

## ğŸš¨ A. à¸•à¸­à¸šà¸„à¸³à¸–à¸²à¸¡à¸—à¸µà¹ˆà¸„à¸¸à¸“à¸–à¸²à¸¡à¸à¸¥à¸±à¸š

### A.1 â€” "à¸–à¹‰à¸²à¸«à¸¢à¸¸à¸”à¹€à¸‚à¹‰à¸²à¹à¸­à¸› 1-2 à¸§à¸±à¸™ à¸ªà¸´à¸—à¸˜à¸´à¹Œà¸«à¸¥à¸¸à¸”à¹€à¸¥à¸¢à¸¡à¸±à¹‰à¸¢?"

**à¸›à¸±à¸à¸«à¸²à¸ˆà¸£à¸´à¸‡à¹†:**
- 60 à¸§à¸±à¸™à¸•à¸´à¸”à¸•à¹ˆà¸­à¸à¸±à¸™ = à¸¢à¸²à¸à¸¡à¸²à¸à¸ˆà¸£à¸´à¸‡à¹† (Duolingo à¸¡à¸µà¹à¸„à¹ˆ 3-5% à¸‚à¸­à¸‡ users à¸—à¸µà¹ˆ streak à¸–à¸¶à¸‡ 60 à¸§à¸±à¸™)
- à¸–à¹‰à¸² streak reset à¸—à¸¸à¸à¸„à¸£à¸±à¹‰à¸‡à¸—à¸µà¹ˆà¸à¸¥à¸²à¸” 1 à¸§à¸±à¸™ â†’ user à¹‚à¸à¸£à¸˜ + à¹€à¸¥à¸´à¸à¹€à¸¥à¹ˆà¸™
- à¹à¸•à¹ˆà¸–à¹‰à¸²à¸‡à¹ˆà¸²à¸¢à¹€à¸à¸´à¸™à¹„à¸› â†’ à¹„à¸¡à¹ˆà¸¡à¸µà¸„à¹ˆà¸²

**à¹€à¸ªà¸™à¸­ 3 à¸—à¸²à¸‡à¹€à¸¥à¸·à¸­à¸ (à¹€à¸£à¸µà¸¢à¸‡à¸ˆà¸²à¸à¹à¸™à¸°à¸™à¸³à¸¡à¸²à¸à¸ªà¸¸à¸”à¹„à¸›à¸™à¹‰à¸­à¸¢à¸ªà¸¸à¸”):**

#### âœ… Option 1: "Streak Tier" â€” à¸›à¸¥à¸”à¸¥à¹‡à¸­à¸„à¹à¸¥à¹‰à¸§à¹„à¸¡à¹ˆà¸«à¸¥à¸¸à¸” + à¸¡à¸µ Grace Period (à¹à¸™à¸°à¸™à¸³!)

```
à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Tier         à¸›à¸¥à¸”à¸¥à¹‡à¸­à¸„     Bonus Energy    Grace Period
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ¥‰ Bronze    Day 7       +10 Energy      à¹„à¸¡à¹ˆà¸¡à¸µ
ğŸ¥ˆ Silver    Day 14      +15 Energy      à¸«à¸¢à¸¸à¸”à¹„à¸”à¹‰ 1 à¸§à¸±à¸™
ğŸ¥‡ Gold      Day 30      +30 Energy      à¸«à¸¢à¸¸à¸”à¹„à¸”à¹‰ 2 à¸§à¸±à¸™
ğŸ’ Diamond   Day 60      +45 Energy      à¸«à¸¢à¸¸à¸”à¹„à¸”à¹‰ 3 à¸§à¸±à¸™

à¸à¸:
â”â”â”
1. Tier à¸—à¸µà¹ˆà¸›à¸¥à¸”à¸¥à¹‡à¸­à¸„à¹à¸¥à¹‰à¸§ â†’ à¹„à¸¡à¹ˆà¸«à¸¥à¸¸à¸” (à¹€à¸›à¹‡à¸™ permanent status)
2. à¸›à¸¥à¸”à¸¥à¹‡à¸­à¸„ Tier à¹ƒà¸«à¸¡à¹ˆ à¸•à¹‰à¸­à¸‡à¹€à¸‚à¹‰à¸²à¸•à¸´à¸”à¸•à¹ˆà¸­à¸à¸±à¸™ (à¹à¸•à¹ˆà¸¡à¸µ Grace à¸ˆà¸²à¸ Tier à¸à¹ˆà¸­à¸™à¸«à¸™à¹‰à¸²)
3. Streak counter à¸­à¸²à¸ˆ reset à¹à¸•à¹ˆ Tier à¸¢à¸±à¸‡à¸­à¸¢à¸¹à¹ˆ
4. Bonus Energy à¹„à¸”à¹‰à¸•à¸­à¸™à¸›à¸¥à¸”à¸¥à¹‡à¸­à¸„ Tier à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™ (à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸‹à¹‰à¸³)

à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:
â”â”â”â”â”â”â”
- Day 1-7: à¹€à¸‚à¹‰à¸²à¸—à¸¸à¸à¸§à¸±à¸™ â†’ à¸›à¸¥à¸”à¸¥à¹‡à¸­à¸„ Bronze ğŸ¥‰ (+10 Energy)
- Day 8-9: à¸«à¸¢à¸¸à¸” 2 à¸§à¸±à¸™ â†’ Streak reset à¹€à¸›à¹‡à¸™ 0
  BUT! à¸¢à¸±à¸‡à¹€à¸›à¹‡à¸™ Bronze à¸­à¸¢à¸¹à¹ˆ
- Day 10-24: à¹€à¸‚à¹‰à¸²à¸­à¸µà¸ 14 à¸§à¸±à¸™ â†’ à¸à¸³à¸¥à¸±à¸‡à¸ˆà¸°à¸–à¸¶à¸‡ Silver
  BUT! Silver à¸•à¹‰à¸­à¸‡ 14 à¸§à¸±à¸™à¸•à¸´à¸”à¸•à¹ˆà¸­à¸à¸±à¸™ (Bronze à¹„à¸¡à¹ˆà¸¡à¸µ Grace)
  âœ… à¸–à¹‰à¸²à¸¡à¸µ Grace 1 à¸§à¸±à¸™ â†’ à¹€à¸‚à¹‰à¸² 14 à¸§à¸±à¸™à¹à¸•à¹ˆà¸«à¸¢à¸¸à¸”à¹„à¸”à¹‰ 1 à¸§à¸±à¸™
- Day 24: à¸›à¸¥à¸”à¸¥à¹‡à¸­à¸„ Silver ğŸ¥ˆ (+15 Energy)
```

**à¸—à¸³à¹„à¸¡à¸”à¸µ:**
- âœ… User à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸ªà¸¶à¸ "à¹€à¸ªà¸µà¸¢à¸«à¸¡à¸”" à¹€à¸¡à¸·à¹ˆà¸­ streak break
- âœ… Tier à¸—à¸µà¹ˆà¸›à¸¥à¸”à¸¥à¹‡à¸­à¸„à¹à¸¥à¹‰à¸§ = à¸„à¸§à¸²à¸¡à¸ªà¸³à¹€à¸£à¹‡à¸ˆà¸–à¸²à¸§à¸£ â†’ à¸¢à¸±à¸‡à¸¡à¸µ motivation
- âœ… Grace Period à¹€à¸à¸´à¹ˆà¸¡à¸•à¸²à¸¡ Tier â†’ reward à¸„à¸§à¸²à¸¡ loyal
- âœ… à¸¢à¸±à¸‡à¸•à¹‰à¸­à¸‡ effort à¹€à¸à¸·à¹ˆà¸­à¸›à¸¥à¸”à¸¥à¹‡à¸­à¸„ Tier à¸–à¸±à¸”à¹„à¸›

#### Option 2: "Streak Freeze" à¸‹à¸·à¹‰à¸­à¸”à¹‰à¸§à¸¢ Energy (à¹à¸šà¸š Duolingo)

```
à¸§à¸´à¸˜à¸µà¸à¸²à¸£:
- "Streak Freeze" = à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ streak break 1 à¸§à¸±à¸™
- à¸£à¸²à¸„à¸²: 10 Energy / 1 Freeze
- à¹€à¸à¹‡à¸šà¹„à¸”à¹‰à¸ªà¸¹à¸‡à¸ªà¸¸à¸” 2 Freezes
- à¸–à¹‰à¸²à¸¡à¸µ Freeze â†’ à¸«à¸¢à¸¸à¸” 1 à¸§à¸±à¸™à¹„à¸¡à¹ˆà¹€à¸ªà¸µà¸¢ streak

à¸‚à¹‰à¸­à¸”à¸µ:
âœ… à¸ªà¸£à¹‰à¸²à¸‡ Energy sink à¹€à¸à¸´à¹ˆà¸¡ (à¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­ Freeze)
âœ… Duolingo à¸à¸´à¸ªà¸¹à¸ˆà¸™à¹Œà¹à¸¥à¹‰à¸§à¸§à¹ˆà¸²à¹„à¸”à¹‰à¸œà¸¥

à¸‚à¹‰à¸­à¹€à¸ªà¸µà¸¢:
âŒ à¸‹à¸±à¸šà¸‹à¹‰à¸­à¸™à¸‚à¸¶à¹‰à¸™ (à¸•à¹‰à¸­à¸‡ build Freeze system)
âŒ User à¸­à¸²à¸ˆà¸£à¸¹à¹‰à¸ªà¸¶à¸à¹€à¸«à¸¡à¸·à¸­à¸™à¸–à¸¹à¸à¸šà¸±à¸‡à¸„à¸±à¸šà¸‹à¸·à¹‰à¸­
```

#### Option 3: "Soft Reset" â€” streak à¸¥à¸”à¸¥à¸‡à¹à¸—à¸™ reset à¹€à¸›à¹‡à¸™ 0

```
à¸§à¸´à¸˜à¸µà¸à¸²à¸£:
- à¸«à¸¢à¸¸à¸” 1 à¸§à¸±à¸™ â†’ streak à¸¥à¸” 3 à¸§à¸±à¸™ (à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ reset à¹€à¸›à¹‡à¸™ 0)
- à¸«à¸¢à¸¸à¸” 2 à¸§à¸±à¸™ â†’ streak à¸¥à¸” 7 à¸§à¸±à¸™
- à¸«à¸¢à¸¸à¸” 3+ à¸§à¸±à¸™ â†’ streak reset à¹€à¸›à¹‡à¸™ 0

à¸‚à¹‰à¸­à¸”à¸µ:
âœ… à¹„à¸¡à¹ˆà¹‚à¸«à¸”à¸£à¹‰à¸²à¸¢à¹€à¸à¸´à¸™à¹„à¸›
âœ… à¸¢à¸±à¸‡à¸¡à¸µ penalty

à¸‚à¹‰à¸­à¹€à¸ªà¸µà¸¢:
âŒ à¸‹à¸±à¸šà¸‹à¹‰à¸­à¸™à¹ƒà¸™à¸à¸²à¸£à¸­à¸˜à¸´à¸šà¸²à¸¢à¹ƒà¸«à¹‰ user
âŒ à¸­à¸²à¸ˆà¸‡à¸‡à¸§à¹ˆà¸² streak à¸¥à¸”à¸—à¸³à¹„à¸¡
```

**à¸„à¸³à¹à¸™à¸°à¸™à¸³: à¹ƒà¸Šà¹‰ Option 1 (Streak Tier + Grace Period)**
- à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸‡à¹ˆà¸²à¸¢
- à¹„à¸¡à¹ˆà¹‚à¸«à¸”à¸£à¹‰à¸²à¸¢
- à¸¢à¸±à¸‡ motivate à¹ƒà¸«à¹‰à¹€à¸‚à¹‰à¸²à¸—à¸¸à¸à¸§à¸±à¸™
- Backend implement à¹„à¸¡à¹ˆà¸‹à¸±à¸šà¸‹à¹‰à¸­à¸™à¸¡à¸²à¸

---

### A.2 â€” à¹„à¸­à¹€à¸”à¸µà¸¢ "à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸‚à¸­à¸‡à¸§à¸±à¸™à¹„à¸¡à¹ˆà¸„à¸´à¸” energy" â€” à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸¥à¸°à¹€à¸­à¸µà¸¢à¸”

**à¹„à¸­à¹€à¸”à¸µà¸¢à¸‚à¸­à¸‡à¸„à¸¸à¸“: "à¸à¸²à¸£à¸à¸” AI à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸‚à¸­à¸‡à¸§à¸±à¸™à¸ˆà¸°à¹„à¸¡à¹ˆà¸„à¸´à¸” energy"**

**à¸œà¸¡à¹€à¸«à¹‡à¸™à¸”à¹‰à¸§à¸¢ 100%! à¸”à¸µà¸à¸§à¹ˆà¸²à¸£à¸°à¸šà¸šà¹€à¸”à¸´à¸¡à¸¡à¸²à¸** à¹€à¸«à¸•à¸¸à¸œà¸¥:

```
à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸š:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

à¸£à¸°à¸šà¸šà¹€à¸”à¸´à¸¡: "à¹„à¸”à¹‰ 1 Free AI Token à¸•à¹ˆà¸­à¸§à¸±à¸™ (à¹„à¸¡à¹ˆà¸ªà¸°à¸ªà¸¡)"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âŒ à¸•à¹‰à¸­à¸‡ track "free AI token" à¹à¸¢à¸à¸ˆà¸²à¸ energy balance
âŒ UI à¸‹à¸±à¸šà¸‹à¹‰à¸­à¸™ (à¹à¸ªà¸”à¸‡ energy + free token?)
âŒ Backend à¸•à¹‰à¸­à¸‡ manage 2 à¸£à¸°à¸šà¸š (energy + token)
âŒ User à¸ªà¸±à¸šà¸ªà¸™ "à¸‰à¸±à¸™à¸¡à¸µ energy à¹€à¸—à¹ˆà¸²à¹„à¸«à¸£à¹ˆà¸ˆà¸£à¸´à¸‡à¹†?"

à¸£à¸°à¸šà¸šà¹ƒà¸«à¸¡à¹ˆ (à¸‚à¸­à¸‡à¸„à¸¸à¸“): "AI à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸‚à¸­à¸‡à¸§à¸±à¸™à¸Ÿà¸£à¸µ"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… à¸‡à¹ˆà¸²à¸¢! à¹à¸„à¹ˆà¹€à¸Šà¹‡à¸„à¸§à¹ˆà¸²à¸§à¸±à¸™à¸™à¸µà¹‰à¹ƒà¸Šà¹‰ AI à¹„à¸›à¹à¸¥à¹‰à¸§à¸à¸µà¹ˆà¸„à¸£à¸±à¹‰à¸‡
âœ… Energy balance = à¸•à¸±à¸§à¹€à¸¥à¸‚à¹€à¸”à¸µà¸¢à¸§ à¹„à¸¡à¹ˆà¸‹à¸±à¸šà¸‹à¹‰à¸­à¸™
âœ… Backend: à¹à¸„à¹ˆà¹€à¸à¸´à¹ˆà¸¡ field "freeAiUsedToday: true/false"
âœ… User à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆà¸‡à¹ˆà¸²à¸¢ "à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸Ÿà¸£à¸µ à¸„à¸£à¸±à¹‰à¸‡à¸•à¹ˆà¸­à¹„à¸›à¹ƒà¸Šà¹‰ energy"
```

**à¹à¸•à¹ˆ! à¸¡à¸µà¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆà¹€à¸à¸´à¹ˆà¸¡:**

```
à¸„à¸³à¸–à¸²à¸¡ 1: Streak à¸™à¸±à¸šà¸ˆà¸²à¸à¸­à¸°à¹„à¸£?
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Option A: à¸™à¸±à¸šà¸ˆà¸²à¸ "à¹€à¸›à¸´à¸”à¹à¸­à¸›" â†’ à¸‡à¹ˆà¸²à¸¢à¸ªà¸¸à¸” à¹à¸•à¹ˆ user à¸­à¸²à¸ˆà¹à¸„à¹ˆà¹€à¸›à¸´à¸”à¹à¸¥à¹‰à¸§à¸›à¸´à¸”
  Option B: à¸™à¸±à¸šà¸ˆà¸²à¸ "à¹ƒà¸Šà¹‰ AI à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸ (à¸Ÿà¸£à¸µ)" â†’ à¸”à¸µà¸à¸§à¹ˆà¸²! user à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸ˆà¸£à¸´à¸‡
  âœ… à¹à¸™à¸°à¸™à¸³ Option B â†’ streak à¸™à¸±à¸šà¹€à¸¡à¸·à¹ˆà¸­ user à¹ƒà¸Šà¹‰ AI à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸‚à¸­à¸‡à¸§à¸±à¸™ (à¸Ÿà¸£à¸µ!)

à¸„à¸³à¸–à¸²à¸¡ 2: "à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸" à¸„à¸´à¸”à¸•à¸²à¸¡ timezone à¹„à¸«à¸™?
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Option A: Server timezone (UTC) â†’ à¸‡à¹ˆà¸²à¸¢à¸ªà¸³à¸«à¸£à¸±à¸š dev à¹à¸•à¹ˆ user à¸­à¸²à¸ˆà¸‡à¸‡
  Option B: User's local timezone â†’ à¸”à¸µà¸à¸§à¹ˆà¸²! à¹€à¸—à¸µà¹ˆà¸¢à¸‡à¸„à¸·à¸™à¸‚à¸­à¸‡ user = reset
  âœ… à¹à¸™à¸°à¸™à¸³ Option B â†’ à¸ªà¹ˆà¸‡ timezone à¸ˆà¸²à¸ client, Server à¸„à¸³à¸™à¸§à¸“

à¸„à¸³à¸–à¸²à¸¡ 3: à¸–à¹‰à¸² user à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ timezone à¹‚à¸à¸‡à¸¥à¹ˆà¸°?
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  â†’ à¹à¸„à¹ˆ free AI 1 à¸„à¸£à¸±à¹‰à¸‡ à¹„à¸¡à¹ˆà¸„à¸¸à¹‰à¸¡à¸—à¸µà¹ˆà¸ˆà¸°à¹‚à¸à¸‡
  â†’ à¹à¸•à¹ˆà¸–à¹‰à¸²à¸à¸±à¸‡à¸§à¸¥: Server à¹€à¸à¹‡à¸š timezone à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸ à¹„à¸¡à¹ˆà¹ƒà¸«à¹‰à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸šà¹ˆà¸­à¸¢
```

---

### ğŸš¨ğŸš¨ğŸš¨ A.3 â€” à¸Šà¹ˆà¸­à¸‡à¹‚à¸«à¸§à¹ˆà¹ƒà¸«à¸à¹ˆ! "à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸Ÿà¸£à¸µ" à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸•à¸±à¸§à¹€à¸¥à¸‚ Revenue à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”!

**à¸™à¸µà¹ˆà¸„à¸·à¸­à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸à¸—à¸µà¹ˆà¸ªà¸¸à¸”à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸£à¸¹à¹‰:**

à¹„à¸­à¹€à¸”à¸µà¸¢ "à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸‚à¸­à¸‡à¸§à¸±à¸™à¸Ÿà¸£à¸µ" à¸”à¸µ à¹à¸•à¹ˆ **à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸•à¸±à¸§à¹€à¸¥à¸‚ Revenue à¸—à¸µà¹ˆà¸„à¸³à¸™à¸§à¸“à¹„à¸§à¹‰à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”!**

```
à¸•à¸±à¸§à¹€à¸¥à¸‚à¹€à¸”à¸´à¸¡ (à¹„à¸¡à¹ˆà¸¡à¸µ "à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸Ÿà¸£à¸µ"):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

User Type    Daily Uses    Energy/day    60-day Total
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Normal       3             3             180 Energy
Active       6             6             360 Energy
Heavy        10            10            600 Energy


à¸•à¸±à¸§à¹€à¸¥à¸‚à¹ƒà¸«à¸¡à¹ˆ (à¸¡à¸µ "à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸Ÿà¸£à¸µ"):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

User Type    Daily Uses    Energy/day    60-day Total    à¸¥à¸”à¸¥à¸‡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Normal       3             2 âœ¨          120 Energy      -60
Active       6             5 âœ¨          300 Energy      -60
Heavy        10            9 âœ¨          540 Energy      -60

(à¸—à¸¸à¸à¸„à¸™à¹ƒà¸Šà¹‰à¸™à¹‰à¸­à¸¢à¸¥à¸‡ 60 Energy à¹ƒà¸™ 60 à¸§à¸±à¸™ à¹€à¸à¸£à¸²à¸°à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸Ÿà¸£à¸µà¸—à¸¸à¸à¸§à¸±à¸™)
```

**Revenue Impact â€” à¸„à¸³à¸™à¸§à¸“à¹ƒà¸«à¸¡à¹ˆ:**

```
Rewards à¸—à¸µà¹ˆà¹„à¸”à¹‰ (à¹à¸šà¸š realistic à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ max):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

                        Normal    Active    Heavy     à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Streak Bonus:           25        55        100       (Bronze+Silver vs à¸–à¸¶à¸‡ Gold/Diamond)
Weekly Challenge:       56        64        72        (70%/80%/90% completion)
Monthly Challenge:      0         60        60        (à¸•à¹‰à¸­à¸‡ streak 30 à¸§à¸±à¸™)
Referral:               15        30        60        (1/2/4 friends)
Milestone:              0         15        45        (500/1000 spent)
Random Bonus (avg):     22        22        22        (5% Ã— 60 Ã— 7.5)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total Rewards:          ~118      ~246      ~359      Energy

Energy Needed:          120       300       540       (à¸«à¸¥à¸±à¸‡ "à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸Ÿà¸£à¸µ")
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Gap (à¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­):        ~2 âœ¨     ~54       ~181      Energy
```

**à¸œà¸¥à¸à¸£à¸°à¸—à¸šà¸•à¹ˆà¸­ Revenue:**

```
                    à¹€à¸”à¸´à¸¡            à¹ƒà¸«à¸¡à¹ˆ (à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸Ÿà¸£à¸µ)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Normal:             à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­      à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸‹à¸·à¹‰à¸­ âœ… (à¹€à¸«à¸¡à¸·à¸­à¸™à¹€à¸”à¸´à¸¡)
Active:             25 Energy        54 Energy â†’ à¸‹à¸·à¹‰à¸­ ~1 à¸„à¸£à¸±à¹‰à¸‡/2 à¹€à¸”à¸·à¸­à¸™ âœ…
Heavy:              265 Energy       181 Energy â†’ à¸‹à¸·à¹‰à¸­ ~3 à¸„à¸£à¸±à¹‰à¸‡/2 à¹€à¸”à¸·à¸­à¸™ (~1.5/month)
                    (4.4x/month)     (1.5x/month) âš ï¸ Revenue à¸¥à¸”à¸¥à¸‡!
```

**à¸ªà¸£à¸¸à¸›: Revenue à¸¥à¸”à¸¥à¸‡ ~30-40% à¸ªà¸³à¸«à¸£à¸±à¸š Heavy User**

```
Revenue à¹€à¸”à¸´à¸¡:          ~297,000 THB/month
Revenue à¹ƒà¸«à¸¡à¹ˆ (à¸›à¸£à¸°à¸¡à¸²à¸“): ~180,000 THB/month

à¸¥à¸”à¸¥à¸‡: ~117,000 THB/month (-39%)
```

**à¹à¸•à¹ˆ! Trade-off à¸—à¸µà¹ˆà¹„à¸”à¹‰:**
```
âœ… Retention à¸ªà¸¹à¸‡à¸‚à¸¶à¹‰à¸™à¸¡à¸²à¸ (à¸—à¸¸à¸à¸„à¸™à¸¡à¸µ free AI à¸—à¸¸à¸à¸§à¸±à¸™)
âœ… User experience à¸”à¸µà¸‚à¸¶à¹‰à¸™ (à¹„à¸¡à¹ˆà¸£à¸¹à¹‰à¸ªà¸¶à¸ paywall)
âœ… Word-of-mouth à¸”à¸µà¸‚à¸¶à¹‰à¸™ ("à¹à¸­à¸›à¸™à¸µà¹‰à¹ƒà¸«à¹‰à¸Ÿà¸£à¸µà¸§à¸±à¸™à¸¥à¸° 1 à¸„à¸£à¸±à¹‰à¸‡!")
âœ… Review à¸”à¸µà¸‚à¸¶à¹‰à¸™ (à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¸µà¸§à¸´à¸§ 1 à¸”à¸²à¸§ "à¹ƒà¸Šà¹‰à¸­à¸°à¹„à¸£à¸à¹‡à¸•à¹‰à¸­à¸‡à¸ˆà¹ˆà¸²à¸¢")
âœ… DAU à¸ªà¸¹à¸‡à¸‚à¸¶à¹‰à¸™ (à¸—à¸¸à¸à¸„à¸™à¸¡à¸µà¹€à¸«à¸•à¸¸à¸œà¸¥à¹€à¸‚à¹‰à¸²à¹à¸­à¸›à¸—à¸¸à¸à¸§à¸±à¸™)
```

**à¸„à¸³à¸–à¸²à¸¡à¸ªà¸³à¸„à¸±à¸:**
```
à¸„à¸¸à¸“ OK à¸à¸±à¸š Revenue à¸—à¸µà¹ˆà¸¥à¸”à¸¥à¸‡ ~40% à¹€à¸à¸·à¹ˆà¸­à¹à¸¥à¸à¸à¸±à¸š Retention à¸—à¸µà¹ˆà¸”à¸µà¸‚à¸¶à¹‰à¸™à¸¡à¸±à¹‰à¸¢?

à¸–à¹‰à¸² OK â†’ à¹ƒà¸Šà¹‰ "à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸Ÿà¸£à¸µ" à¹„à¸”à¹‰à¹€à¸¥à¸¢ âœ…
à¸–à¹‰à¸²à¹„à¸¡à¹ˆ OK â†’ à¸›à¸£à¸±à¸š reward à¸¥à¸‡ à¹€à¸Šà¹ˆà¸™:
  - Weekly challenge: 5 â†’ 3 Energy
  - Streak bonus: à¸¥à¸”à¸¥à¸‡ 20%
  - à¹€à¸à¸·à¹ˆà¸­à¸Šà¸”à¹€à¸Šà¸¢ revenue à¸—à¸µà¹ˆà¸«à¸²à¸¢à¹„à¸›
```

---

## ğŸ”´ B. à¸Šà¹ˆà¸­à¸‡à¹‚à¸«à¸§à¹ˆà¸ªà¸³à¸„à¸±à¸à¸—à¸µà¹ˆà¸à¸š

### B.1 â€” Referral à¸—à¸³à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸‡à¹ˆà¸²à¸¢à¹† (à¹„à¸¡à¹ˆà¸¡à¸µ User Account!)

**à¸›à¸±à¸à¸«à¸²à¹ƒà¸«à¸à¹ˆ:**
```
à¸£à¸°à¸šà¸šà¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™:
- à¹ƒà¸Šà¹‰ deviceId (à¹„à¸¡à¹ˆà¸¡à¸µ login/signup)
- à¹„à¸¡à¹ˆà¸¡à¸µ user account
- à¹„à¸¡à¹ˆà¸¡à¸µ email à¸«à¸£à¸·à¸­ phone number

à¹à¸•à¹ˆ Referral à¸•à¹‰à¸­à¸‡à¸à¸²à¸£:
- Referral code (à¸ªà¹ˆà¸‡à¹ƒà¸«à¹‰à¹€à¸à¸·à¹ˆà¸­à¸™)
- Track à¸§à¹ˆà¸²à¹ƒà¸„à¸£à¸Šà¸§à¸™à¹ƒà¸„à¸£
- Verify à¸§à¹ˆà¸² "à¹€à¸à¸·à¹ˆà¸­à¸™" à¸„à¸·à¸­à¸„à¸™à¸ˆà¸£à¸´à¸‡ à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¸•à¸±à¸§à¹€à¸­à¸‡
```

**à¸—à¸²à¸‡à¹€à¸¥à¸·à¸­à¸:**

```
Option A: Referral Code à¸œà¸¹à¸à¸à¸±à¸š deviceId
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- à¸ªà¸£à¹‰à¸²à¸‡ unique code à¸ˆà¸²à¸ deviceId (à¹€à¸Šà¹ˆà¸™ "MIRO-X7K2")
- à¹€à¸à¸·à¹ˆà¸­à¸™à¹ƒà¸ªà¹ˆ code à¸•à¸­à¸™à¹€à¸›à¸´à¸”à¹à¸­à¸›à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸
- âœ… à¸‡à¹ˆà¸²à¸¢ à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸¡à¸µ account
- âŒ à¹‚à¸à¸‡à¸‡à¹ˆà¸²à¸¢ (à¸¥à¸šà¹à¸­à¸› à¸¥à¸‡à¹ƒà¸«à¸¡à¹ˆ à¹ƒà¸ªà¹ˆ code à¸•à¸±à¸§à¹€à¸­à¸‡)

Option B: Deep Link Referral
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- à¸ªà¸£à¹‰à¸²à¸‡ link: miro.app/refer/X7K2
- à¹€à¸à¸·à¹ˆà¸­à¸™à¸à¸” link â†’ à¸¥à¸‡ app â†’ auto-link
- âœ… UX à¸”à¸µ (à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸à¸´à¸¡à¸à¹Œ code)
- âŒ à¸¢à¸±à¸‡à¹‚à¸à¸‡à¹„à¸”à¹‰

Option C: à¹€à¸¥à¸·à¹ˆà¸­à¸™ Referral à¹„à¸› Phase 4+ (à¸«à¸¥à¸±à¸‡à¸¡à¸µ Account System) âœ… à¹à¸™à¸°à¸™à¸³
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- Phase 1-3: à¹„à¸¡à¹ˆà¸¡à¸µ Referral
- Phase 4+: à¹€à¸à¸´à¹ˆà¸¡ optional account (Google Sign-in / Apple Sign-in)
- à¸«à¸¥à¸±à¸‡à¸ˆà¸²à¸à¸™à¸±à¹‰à¸™à¸„à¹ˆà¸­à¸¢à¹€à¸›à¸´à¸” Referral
- âœ… à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢à¸ˆà¸²à¸ fraud
- âœ… à¸¥à¸” complexity à¹ƒà¸™ Phase 1
```

**à¸„à¸³à¹à¸™à¸°à¸™à¸³: à¹€à¸¥à¸·à¹ˆà¸­à¸™ Referral à¹„à¸› Phase 4+**
- Referral à¹€à¸›à¹‡à¸™ feature à¸—à¸µà¹ˆ fraud-prone à¸¡à¸²à¸
- à¹„à¸¡à¹ˆà¸¡à¸µ account system = à¸›à¹‰à¸­à¸‡à¸à¸±à¸™à¸¢à¸²à¸
- à¹€à¸™à¹‰à¸™ core features à¸à¹ˆà¸­à¸™ (Daily, Streak, Challenge)

---

### B.2 â€” Notification Strategy à¸‚à¸²à¸”à¸«à¸²à¸¢à¹„à¸› (à¸ªà¸³à¸„à¸±à¸à¸¡à¸²à¸!)

**à¸›à¸±à¸à¸«à¸²:**
```
à¸£à¸°à¸šà¸š gamification à¸ˆà¸°à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸œà¸¥à¸–à¹‰à¸² user à¸¥à¸·à¸¡!
Duolingo à¸›à¸£à¸°à¸ªà¸šà¸„à¸§à¸²à¸¡à¸ªà¸³à¹€à¸£à¹‡à¸ˆà¹€à¸à¸£à¸²à¸° Notification à¹€à¸à¹ˆà¸‡à¸¡à¸²à¸ à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆà¹à¸„à¹ˆ gamification
```

**à¸•à¹‰à¸­à¸‡à¸¡à¸µ Push Notification:**

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Streak Reminder (à¸—à¸¸à¸à¸§à¸±à¸™)
   â° à¹€à¸§à¸¥à¸²: 20:00 (à¸›à¸£à¸±à¸šà¹„à¸”à¹‰)
   ğŸ“± "à¸­à¸¢à¹ˆà¸²à¸¥à¸·à¸¡! Streak 12 à¸§à¸±à¸™à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸à¸³à¸¥à¸±à¸‡à¸ˆà¸°à¸«à¸²à¸¢à¸™à¸° ğŸ”¥"
   ğŸ’¡ à¸ªà¹ˆà¸‡à¹€à¸‰à¸à¸²à¸°à¸§à¸±à¸™à¸—à¸µà¹ˆà¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¹€à¸›à¸´à¸”à¹à¸­à¸›

2. Streak Break Warning (à¹€à¸£à¹ˆà¸‡à¸”à¹ˆà¸§à¸™)
   â° à¹€à¸§à¸¥à¸²: 22:00 (à¹ƒà¸à¸¥à¹‰à¹€à¸—à¸µà¹ˆà¸¢à¸‡à¸„à¸·à¸™)
   ğŸ“± "à¹€à¸«à¸¥à¸·à¸­ 2 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡! à¸­à¸¢à¹ˆà¸²à¹ƒà¸«à¹‰ streak 25 à¸§à¸±à¸™à¸«à¸²à¸¢à¹„à¸› ğŸ˜±"
   ğŸ’¡ à¸ªà¹ˆà¸‡à¹€à¸‰à¸à¸²à¸°à¸§à¸±à¸™à¸—à¸µà¹ˆà¹ƒà¸à¸¥à¹‰à¸ªà¸¹à¸à¹€à¸ªà¸µà¸¢ streak à¸ªà¸³à¸„à¸±à¸

3. Challenge Almost Done
   ğŸ“± "à¸­à¸µà¸à¹à¸„à¹ˆ 2 à¸¡à¸·à¹‰à¸­! Log 7 meals à¹€à¸à¸·à¹ˆà¸­à¸£à¸±à¸š 5 Energy à¸Ÿà¸£à¸µ ğŸ¯"
   ğŸ’¡ à¸ªà¹ˆà¸‡à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸«à¸¥à¸·à¸­ 20% à¸‚à¸­à¸‡ challenge

4. Challenge Reset Warning (à¸§à¸±à¸™à¹€à¸ªà¸²à¸£à¹Œ)
   ğŸ“± "Challenge à¸£à¸µà¹€à¸‹à¹‡à¸•à¸§à¸±à¸™à¸à¸£à¸¸à¹ˆà¸‡à¸™à¸µà¹‰! à¸¢à¸±à¸‡à¹€à¸«à¸¥à¸·à¸­: Use AI 1/3 ğŸ“Š"
   ğŸ’¡ à¸ªà¹ˆà¸‡à¸§à¸±à¸™à¸ªà¸¸à¸”à¸—à¹‰à¸²à¸¢à¸à¹ˆà¸­à¸™ reset

5. Tier Almost Unlocked
   ğŸ“± "à¸­à¸µà¸ 3 à¸§à¸±à¸™! à¸„à¸¸à¸“à¸ˆà¸°à¹€à¸›à¹‡à¸™ Gold ğŸ¥‡ à¹„à¸”à¹‰ 30 Energy à¸Ÿà¸£à¸µ!"
   ğŸ’¡ à¸ªà¹ˆà¸‡à¹€à¸¡à¸·à¹ˆà¸­à¹ƒà¸à¸¥à¹‰à¸›à¸¥à¸”à¸¥à¹‡à¸­à¸„ tier

6. Random Bonus Alert
   ğŸ“± "ğŸ² Lucky Day! à¸„à¸¸à¸“à¹„à¸”à¹‰ 8 Energy à¸Ÿà¸£à¸µ! à¹€à¸‚à¹‰à¸²à¸¡à¸²à¸£à¸±à¸šà¹€à¸¥à¸¢"
   ğŸ’¡ à¹€à¸à¸´à¹ˆà¸¡ open rate (surprise element)

7. Win-back (Re-engagement)
   ğŸ“± "à¹€à¸£à¸²à¸„à¸´à¸”à¸–à¸¶à¸‡à¸„à¸¸à¸“! à¸à¸¥à¸±à¸šà¸¡à¸²à¸£à¸±à¸š 5 Energy à¸Ÿà¸£à¸µà¹€à¸¥à¸¢ ğŸ"
   ğŸ’¡ à¸ªà¹ˆà¸‡à¸«à¸¥à¸±à¸‡à¸ˆà¸²à¸à¹„à¸¡à¹ˆà¹€à¸‚à¹‰à¸²à¹à¸­à¸› 3 à¸§à¸±à¸™

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

à¸ªà¸³à¸„à¸±à¸à¸¡à¸²à¸:
- à¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰ Firebase Cloud Messaging (FCM)
- à¸•à¹‰à¸­à¸‡à¸¡à¸µ Scheduled Functions à¸ªà¸³à¸«à¸£à¸±à¸šà¸ªà¹ˆà¸‡ notification
- à¸•à¹‰à¸­à¸‡à¹ƒà¸«à¹‰ user à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¹€à¸§à¸¥à¸² reminder à¹„à¸”à¹‰
- à¸­à¸¢à¹ˆà¸²à¸ªà¹ˆà¸‡à¹€à¸¢à¸­à¸°à¹€à¸à¸´à¸™à¹„à¸› (max 2 à¸„à¸£à¸±à¹‰à¸‡/à¸§à¸±à¸™)
```

---

### B.3 â€” à¸•à¸±à¸§à¹€à¸¥à¸‚ "Total Reward = 335" à¸­à¸²à¸ˆà¸„à¸³à¸™à¸§à¸“à¸œà¸´à¸”

**à¸›à¸±à¸à¸«à¸²:**
```
à¹ƒà¸™ model à¹€à¸”à¸´à¸¡à¸šà¸­à¸à¸§à¹ˆà¸²:
- Total Reward = 335 Energy (60 à¸§à¸±à¸™)
- à¹à¸•à¹ˆà¹„à¸¡à¹ˆà¹„à¸”à¹‰ breakdown à¸¡à¸²à¸§à¹ˆà¸² 335 à¸¡à¸²à¸ˆà¸²à¸à¹„à¸«à¸™

à¸¥à¸­à¸‡à¸„à¸³à¸™à¸§à¸“ MAX possible:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Daily Free AI:         60 Ã— 1 = 60 Energy (1/à¸§à¸±à¸™ Ã— 60 à¸§à¸±à¸™)
Streak Day 7:          10
Streak Day 14:         15
Streak Day 30:         30
Streak Day 60:         45
Weekly Challenge:      (5+5) Ã— 8 weeks = 80
Monthly (30-day):      60
Milestone 500:         15
Milestone 1000:        30
Referral:              15 Ã— 2 Ã— 2months = 60
Random Bonus (max):    60 Ã— 0.05 Ã— 10 = 30
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
MAX Total:             435 Energy

à¸–à¹‰à¸²à¸•à¸±à¸” "Daily Free AI" (à¹€à¸à¸£à¸²à¸°à¹€à¸›à¹‡à¸™ free usage à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ energy):
MAX Total (energy only): 375 Energy

à¸–à¹‰à¸²à¹ƒà¸Šà¹‰ "realistic" (à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ max):
Realistic Total: ~250-300 Energy
```

**à¸ªà¸£à¸¸à¸›: à¸•à¸±à¸§à¹€à¸¥à¸‚ 335 à¸­à¸²à¸ˆ optimistic à¹„à¸› â€” à¸•à¹‰à¸­à¸‡à¸„à¸³à¸™à¸§à¸“à¹ƒà¸«à¸¡à¹ˆà¸•à¸²à¸¡ model à¸—à¸µà¹ˆà¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆà¹à¸¥à¹‰à¸§**

---

### B.4 â€” "Weekly Challenge: Use AI 3 times" + "à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸Ÿà¸£à¸µ" = à¸‡à¹ˆà¸²à¸¢à¹€à¸à¸´à¸™à¹„à¸›?

**à¸›à¸±à¸à¸«à¸²:**
```
à¸–à¹‰à¸² "à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸‚à¸­à¸‡à¸§à¸±à¸™à¸Ÿà¸£à¸µ" + challenge à¸™à¸±à¸šà¸£à¸§à¸¡ free AI:
â†’ User à¹à¸„à¹ˆà¹€à¸‚à¹‰à¸²à¹à¸­à¸› 3 à¸§à¸±à¸™ à¹ƒà¸Šà¹‰ free AI 3 à¸„à¸£à¸±à¹‰à¸‡ = à¸ˆà¸š challenge!
â†’ à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰ energy à¹€à¸¥à¸¢
â†’ à¹„à¸”à¹‰ 5 Energy à¸Ÿà¸£à¸µà¸—à¸¸à¸à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ à¹‚à¸”à¸¢à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸ˆà¹ˆà¸²à¸¢à¸­à¸°à¹„à¸£
```

**à¸—à¸²à¸‡à¹€à¸¥à¸·à¸­à¸:**

```
Option A: Challenge à¸•à¹‰à¸­à¸‡ "paid AI" à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™ (à¹„à¸¡à¹ˆà¸™à¸±à¸š free)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- âœ… à¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰ energy à¸ˆà¸£à¸´à¸‡ â†’ à¸ªà¸£à¹‰à¸²à¸‡ demand
- âŒ User à¸—à¸µà¹ˆ energy à¸«à¸¡à¸”à¸—à¸³à¹„à¸¡à¹ˆà¹„à¸”à¹‰
- âŒ à¸­à¸²à¸ˆà¸£à¸¹à¹‰à¸ªà¸¶à¸à¹„à¸¡à¹ˆ fair

Option B: Challenge à¸™à¸±à¸šà¸—à¸±à¹‰à¸‡ free + paid (à¸•à¸²à¸¡ model à¹€à¸”à¸´à¸¡) âœ… à¹à¸™à¸°à¸™à¸³
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- âœ… à¸—à¸¸à¸à¸„à¸™à¸—à¸³à¹„à¸”à¹‰ â†’ retention
- âœ… à¸‡à¹ˆà¸²à¸¢à¸à¹‡à¸”à¸µ à¸ªà¸³à¸«à¸£à¸±à¸š Phase 1 (à¸­à¸¢à¹ˆà¸²à¸‹à¸±à¸šà¸‹à¹‰à¸­à¸™à¹€à¸à¸´à¸™)
- âš ï¸ Revenue impact à¸•à¹ˆà¸³ à¹à¸•à¹ˆ retention impact à¸ªà¸¹à¸‡
- ğŸ’¡ Phase 2+ à¸„à¹ˆà¸­à¸¢à¹€à¸à¸´à¹ˆà¸¡ challenge à¸—à¸µà¹ˆà¸¢à¸²à¸à¸‚à¸¶à¹‰à¸™

Option C: à¹€à¸à¸´à¹ˆà¸¡ challenge target â†’ "Use AI 5 times" à¹à¸—à¸™ 3
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- Free AI 1/à¸§à¸±à¸™ Ã— 7 à¸§à¸±à¸™ = 7 free â†’ à¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰ paid à¸­à¸µà¸ 0 à¸„à¸£à¸±à¹‰à¸‡
  (à¸–à¹‰à¸² 5 times/week â†’ à¸•à¹‰à¸­à¸‡à¹€à¸‚à¹‰à¸² 5 à¸§à¸±à¸™ à¹ƒà¸Šà¹‰ free = à¸ˆà¸š)
- âŒ à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸ˆà¹ˆà¸²à¸¢ energy
- ğŸ’¡ à¸–à¹‰à¸²à¸ˆà¸°à¸šà¸±à¸‡à¸„à¸±à¸šà¹ƒà¸«à¹‰à¹ƒà¸Šà¹‰ paid: à¸•à¹‰à¸­à¸‡à¸•à¸±à¹‰à¸‡ target > 7 (à¹€à¸Šà¹ˆà¸™ "Use AI 10 times/week")
  à¹à¸•à¹ˆà¸à¹‡à¹‚à¸«à¸”à¹€à¸à¸´à¸™à¹„à¸›
```

**à¸„à¸³à¹à¸™à¸°à¸™à¸³: à¹ƒà¸Šà¹‰ Option B + à¸›à¸£à¸±à¸š challenge à¹ƒà¸™ Phase 2**
- Phase 1: à¸™à¸±à¸šà¸£à¸§à¸¡ free + paid (à¸‡à¹ˆà¸²à¸¢, retention à¹€à¸™à¹‰à¸™)
- Phase 2: à¹€à¸à¸´à¹ˆà¸¡ challenge à¹ƒà¸«à¸¡à¹ˆà¸—à¸µà¹ˆ require paid AI à¹€à¸Šà¹ˆà¸™:
  - "à¸–à¹ˆà¸²à¸¢à¸£à¸¹à¸›à¸­à¸²à¸«à¸²à¸£ 3 à¸„à¸£à¸±à¹‰à¸‡" (à¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰ camera AI = 1 energy à¸•à¹ˆà¸­à¸„à¸£à¸±à¹‰à¸‡)
  - "à¸–à¸²à¸¡à¹à¸Šà¸— AI 3 à¸„à¸£à¸±à¹‰à¸‡" (chat AI = 1 energy à¸•à¹ˆà¸­à¸„à¸£à¸±à¹‰à¸‡)

---

### B.5 â€” Edge Cases à¸—à¸µà¹ˆà¸‚à¸²à¸”à¸«à¸²à¸¢à¹„à¸›

```
1. Offline Mode
â”â”â”â”â”â”â”â”â”â”â”â”â”â”
à¸–à¹‰à¸² user à¹„à¸¡à¹ˆà¸¡à¸µ internet:
- à¹ƒà¸Šà¹‰ free AI à¹„à¸”à¹‰à¸¡à¸±à¹‰à¸¢? (AI à¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰ internet à¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§)
- Streak à¸™à¸±à¸šà¸¡à¸±à¹‰à¸¢? (à¸•à¹‰à¸­à¸‡ sync à¸à¸±à¸š server)
â†’ à¸•à¹‰à¸­à¸‡à¸ˆà¸±à¸”à¸à¸²à¸£: Queue action à¹à¸¥à¹‰à¸§ sync à¸—à¸µà¸«à¸¥à¸±à¸‡

2. Timezone Change
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
User à¹€à¸”à¸´à¸™à¸—à¸²à¸‡à¸‚à¹‰à¸²à¸¡à¸›à¸£à¸°à¹€à¸—à¸¨:
- "à¸§à¸±à¸™à¸™à¸µà¹‰" à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹„à¸› â†’ free AI reset à¸¡à¸±à¹‰à¸¢?
â†’ à¸•à¹‰à¸­à¸‡à¸ˆà¸±à¸”à¸à¸²à¸£: à¹ƒà¸Šà¹‰ timezone à¸—à¸µà¹ˆ register à¹„à¸§à¹‰à¸•à¸­à¸™à¹à¸£à¸

3. App Update / Migration
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
User à¸­à¸±à¸› app version à¹ƒà¸«à¸¡à¹ˆ:
- Streak data à¸«à¸²à¸¢à¸¡à¸±à¹‰à¸¢?
- Challenge progress à¸«à¸²à¸¢à¸¡à¸±à¹‰à¸¢?
â†’ à¸•à¹‰à¸­à¸‡à¸ˆà¸±à¸”à¸à¸²à¸£: à¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™ Firestore (server-side)
â†’ Client à¹à¸„à¹ˆ cache â†’ safe!

4. Multiple Devices
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
User à¹ƒà¸Šà¹‰ 2 à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡ (phone + tablet):
- Free AI à¹„à¸”à¹‰à¸—à¸±à¹‰à¸‡ 2 à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¡à¸±à¹‰à¸¢? (à¸„à¸§à¸£à¸ˆà¸°à¹„à¸¡à¹ˆ)
- Streak à¸™à¸±à¸šà¸ˆà¸²à¸à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¹„à¸«à¸™?
â†’ à¸•à¹‰à¸­à¸‡à¸ˆà¸±à¸”à¸à¸²à¸£: à¸œà¸¹à¸à¸à¸±à¸š deviceId â†’ à¹à¸•à¹ˆà¸¥à¸°à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡ = à¸„à¸™à¸¥à¸° account
â†’ à¸«à¸£à¸·à¸­à¸–à¹‰à¸²à¸¡à¸µ login system â†’ merge à¹„à¸”à¹‰

5. Daylight Saving Time
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
à¹„à¸—à¸¢à¹„à¸¡à¹ˆà¸¡à¸µ DST à¹à¸•à¹ˆà¸–à¹‰à¸² user à¸­à¸¢à¸¹à¹ˆà¸•à¹ˆà¸²à¸‡à¸›à¸£à¸°à¹€à¸—à¸¨:
- "à¹€à¸—à¸µà¹ˆà¸¢à¸‡à¸„à¸·à¸™" à¹€à¸¥à¸·à¹ˆà¸­à¸™ 1 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡
â†’ à¸•à¹‰à¸­à¸‡à¸ˆà¸±à¸”à¸à¸²à¸£: à¹ƒà¸Šà¹‰ UTC à¹ƒà¸™ server + à¹à¸›à¸¥à¸‡à¹€à¸›à¹‡à¸™ local time
```

---

### B.6 â€” Admin Panel à¹„à¸¡à¹ˆà¸¡à¸µ "Emergency Button"

```
à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œà¸‰à¸¸à¸à¹€à¸‰à¸´à¸™à¸—à¸µà¹ˆà¸­à¸²à¸ˆà¹€à¸à¸´à¸”:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Bug à¸—à¸³à¹ƒà¸«à¹‰ energy à¸«à¸²à¸¢à¸«à¸¡à¸” (à¹€à¸„à¸¢à¹€à¸à¸´à¸”à¸à¸±à¸šà¸«à¸¥à¸²à¸¢à¹à¸­à¸›)
   â†’ à¸•à¹‰à¸­à¸‡à¸¡à¸µà¸›à¸¸à¹ˆà¸¡: "Restore all users to balance before X date"

2. Exploit à¸–à¸¹à¸à¸„à¹‰à¸™à¸à¸š (à¸¡à¸µà¸„à¸™à¹‚à¸à¸‡ energy à¹„à¸”à¹‰)
   â†’ à¸•à¹‰à¸­à¸‡à¸¡à¸µà¸›à¸¸à¹ˆà¸¡: "Freeze all reward claims" (à¸›à¸´à¸”à¸Šà¸±à¹ˆà¸§à¸„à¸£à¸²à¸§)
   â†’ à¸•à¹‰à¸­à¸‡à¸¡à¸µà¸›à¸¸à¹ˆà¸¡: "Rollback transactions after X date"

3. Wrong config (à¸•à¸±à¹‰à¸‡ reward à¸œà¸´à¸” à¹€à¸Šà¹ˆà¸™ Day 7 = 1000 Energy)
   â†’ à¸•à¹‰à¸­à¸‡à¸¡à¸µà¸›à¸¸à¹ˆà¸¡: "Revert config to version X"
   â†’ Config à¸•à¹‰à¸­à¸‡à¸¡à¸µ version history

4. Server overload (user à¹€à¸¢à¸­à¸°à¹€à¸à¸´à¸™à¹„à¸›)
   â†’ à¸•à¹‰à¸­à¸‡à¸¡à¸µ: Feature flag "disable daily rewards" à¸Šà¸±à¹ˆà¸§à¸„à¸£à¸²à¸§
```

---

## ğŸ’¡ C. à¸‚à¹‰à¸­à¹€à¸ªà¸™à¸­à¹à¸™à¸°à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡

### C.1 â€” "Comeback Bonus" à¸ªà¸³à¸«à¸£à¸±à¸š Lapsed Users

```
à¸›à¸±à¸à¸«à¸²: User à¸«à¸²à¸¢à¹„à¸› 1 à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ streak à¸«à¸²à¸¢ â†’ à¹€à¸¥à¸´à¸à¹€à¸¥à¹ˆà¸™à¹€à¸¥à¸¢
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

à¹‚à¸‹à¸¥à¸¹à¸Šà¸±à¸™: "Welcome Back Bonus"
- à¸«à¸²à¸¢à¹„à¸› 3-7 à¸§à¸±à¸™  â†’ à¸à¸¥à¸±à¸šà¸¡à¸²à¹„à¸”à¹‰ 3 Energy à¸Ÿà¸£à¸µ
- à¸«à¸²à¸¢à¹„à¸› 7-14 à¸§à¸±à¸™ â†’ à¸à¸¥à¸±à¸šà¸¡à¸²à¹„à¸”à¹‰ 5 Energy à¸Ÿà¸£à¸µ
- à¸«à¸²à¸¢à¹„à¸› 14-30 à¸§à¸±à¸™ â†’ à¸à¸¥à¸±à¸šà¸¡à¸²à¹„à¸”à¹‰ 10 Energy à¸Ÿà¸£à¸µ + 1 Streak Freeze
- à¸«à¸²à¸¢à¹„à¸› 30+ à¸§à¸±à¸™  â†’ à¸à¸¥à¸±à¸šà¸¡à¸²à¹„à¸”à¹‰ 15 Energy à¸Ÿà¸£à¸µ + Start à¸—à¸µà¹ˆ Bronze tier

à¸ªà¸³à¸„à¸±à¸: "Comeback" à¹„à¸”à¹‰à¹à¸„à¹ˆ 1 à¸„à¸£à¸±à¹‰à¸‡/60 à¸§à¸±à¸™ (à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ abuse)
```

### C.2 â€” "Energy Expiry" à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ Hoarding

```
à¸›à¸±à¸à¸«à¸²: User à¸ªà¸°à¸ªà¸¡ energy 500+ à¹à¸¥à¹‰à¸§à¹„à¸¡à¹ˆà¸‹à¸·à¹‰à¸­à¸­à¸µà¸à¹€à¸¥à¸¢
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

à¹‚à¸‹à¸¥à¸¹à¸Šà¸±à¸™: Energy à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸Ÿà¸£à¸µ (reward) à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸ 90 à¸§à¸±à¸™
- Energy à¸—à¸µà¹ˆà¸‹à¸·à¹‰à¸­ â†’ à¹„à¸¡à¹ˆà¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸ (à¸•à¸¥à¸­à¸”à¸Šà¸µà¸)
- Energy à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸Ÿà¸£à¸µ (challenge, streak, bonus) â†’ à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸ 90 à¸§à¸±à¸™
- à¸£à¸°à¸šà¸šà¹ƒà¸Šà¹‰ "free energy" à¸à¹ˆà¸­à¸™ "paid energy" (FIFO)
- à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™ 7 à¸§à¸±à¸™à¸à¹ˆà¸­à¸™à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸

à¸‚à¹‰à¸­à¸”à¸µ:
âœ… à¸ªà¸£à¹‰à¸²à¸‡ urgency à¹ƒà¸«à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™
âœ… à¸›à¹‰à¸­à¸‡à¸à¸±à¸™ hoarding
âœ… Energy à¸—à¸µà¹ˆà¸‹à¸·à¹‰à¸­à¹„à¸¡à¹ˆà¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸ = fair

à¸‚à¹‰à¸­à¹€à¸ªà¸µà¸¢:
âš ï¸ à¸‹à¸±à¸šà¸‹à¹‰à¸­à¸™à¸‚à¸¶à¹‰à¸™ (à¸•à¹‰à¸­à¸‡ track expiry per energy unit)
âš ï¸ User à¸­à¸²à¸ˆà¹„à¸¡à¹ˆà¸Šà¸­à¸š

â†’ à¹à¸™à¸°à¸™à¸³: à¹€à¸¥à¸·à¹ˆà¸­à¸™à¹„à¸› Phase 3+ (à¹„à¸¡à¹ˆà¸ˆà¸³à¹€à¸›à¹‡à¸™à¹ƒà¸™ Phase 1)
```

### C.3 â€” Cost Estimate à¸—à¸µà¹ˆà¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸„à¸³à¸™à¸§à¸“

```
Firebase Costs (à¸›à¸£à¸°à¸¡à¸²à¸“ 10,000 users):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Firestore
   - Reads: 100 reads/user/day Ã— 10,000 = 1M reads/day
   - Writes: 10 writes/user/day Ã— 10,000 = 100K writes/day
   - Cost: ~$50-100/month

2. Cloud Functions
   - Invocations: ~200K/day
   - GB-seconds: ~50K/day
   - Cost: ~$30-50/month

3. Cloud Messaging (FCM)
   - Free for standard notifications
   - Cost: $0

4. Admin Panel (Cloud Run)
   - Minimal traffic (admin only)
   - Cost: ~$5-10/month

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Total estimated: ~$85-160/month (~3,000-5,600 THB)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

à¹€à¸—à¸µà¸¢à¸šà¸à¸±à¸š Revenue: ~180,000 THB/month
â†’ Cost = ~2-3% of revenue âœ… à¸„à¸¸à¹‰à¸¡à¸¡à¸²à¸!
```

---

### C.4 â€” à¸­à¸˜à¸´à¸šà¸²à¸¢ 3 à¸„à¸³à¸–à¸²à¸¡à¸—à¸µà¹ˆà¸„à¸¸à¸“à¹„à¸¡à¹ˆà¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ

à¸—à¹‰à¸²à¸¢à¹€à¸­à¸à¸ªà¸²à¸£à¹€à¸”à¸´à¸¡à¸¡à¸µ 3 à¸„à¸³à¸–à¸²à¸¡ à¸—à¸µà¹ˆà¸„à¸¸à¸“à¸šà¸­à¸à¸§à¹ˆà¸² "à¹„à¸¡à¹ˆà¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ" à¸œà¸¡à¸­à¸˜à¸´à¸šà¸²à¸¢à¹ƒà¸«à¸¡à¹ˆ:

```
1. "Wireframe/mockup à¸‚à¸­à¸‡ UI"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
= à¸­à¸­à¸à¹à¸šà¸šà¸«à¸™à¹‰à¸²à¸ˆà¸­à¸„à¸£à¹ˆà¸²à¸§à¹† à¸§à¹ˆà¸² UI à¸ˆà¸°à¸«à¸™à¹‰à¸²à¸•à¸²à¹€à¸›à¹‡à¸™à¸¢à¸±à¸‡à¹„à¸‡
à¹€à¸Šà¹ˆà¸™: à¸«à¸™à¹‰à¸² "Daily Check-in" à¸ˆà¸°à¸¡à¸µà¸›à¸¸à¹ˆà¸¡à¸­à¸°à¹„à¸£ à¸§à¸²à¸‡à¸•à¸£à¸‡à¹„à¸«à¸™
â†’ à¸à¸¹à¸”à¸‡à¹ˆà¸²à¸¢à¹† = "à¸£à¹ˆà¸²à¸‡à¸ à¸²à¸à¸«à¸™à¹‰à¸²à¸ˆà¸­"

2. "Pseudocode à¸‚à¸­à¸‡ Cloud Functions"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
= à¹€à¸‚à¸µà¸¢à¸™ logic à¸‚à¸­à¸‡ backend à¹à¸šà¸šà¸„à¸£à¹ˆà¸²à¸§à¹† à¸à¹ˆà¸­à¸™à¹€à¸‚à¸µà¸¢à¸™à¹‚à¸„à¹‰à¸”à¸ˆà¸£à¸´à¸‡
à¹€à¸Šà¹ˆà¸™: "à¹€à¸¡à¸·à¹ˆà¸­ user à¸à¸” claim â†’ à¹€à¸Šà¹‡à¸„ streak â†’ à¸„à¸³à¸™à¸§à¸“ reward â†’ à¹€à¸à¸´à¹ˆà¸¡ energy"
â†’ à¸à¸¹à¸”à¸‡à¹ˆà¸²à¸¢à¹† = "à¸£à¹ˆà¸²à¸‡ logic backend à¸à¹ˆà¸­à¸™à¹€à¸‚à¸µà¸¢à¸™à¸ˆà¸£à¸´à¸‡"

3. "Cost estimate"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
= à¸›à¸£à¸°à¸¡à¸²à¸“à¸à¸²à¸£à¸§à¹ˆà¸²à¸ˆà¸°à¹€à¸ªà¸µà¸¢à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¹€à¸—à¹ˆà¸²à¹„à¸«à¸£à¹ˆà¸•à¹ˆà¸­à¹€à¸”à¸·à¸­à¸™
à¹€à¸Šà¹ˆà¸™: Firebase, Cloud Run, Server costs
â†’ à¸à¸¹à¸”à¸‡à¹ˆà¸²à¸¢à¹† = "à¸„à¸³à¸™à¸§à¸“à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢"
(à¸œà¸¡à¸„à¸³à¸™à¸§à¸“à¹„à¸§à¹‰à¸‚à¹‰à¸²à¸‡à¸šà¸™à¹à¸¥à¹‰à¸§à¹ƒà¸™ C.3)
```

---

## ğŸ“‹ D. Revised Model â€” à¸ªà¸£à¸¸à¸›à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ˆà¸²à¸à¸à¸²à¸£à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œ

### à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ˆà¸²à¸ Model à¹€à¸”à¸´à¸¡:

| # | à¹€à¸£à¸·à¹ˆà¸­à¸‡ | à¹€à¸”à¸´à¸¡ | à¹ƒà¸«à¸¡à¹ˆ (à¹à¸™à¸°à¸™à¸³) |
|---|--------|------|---------------|
| 1 | Daily Free AI | à¹à¸ˆà¸ 1 token (à¹„à¸¡à¹ˆà¸ªà¸°à¸ªà¸¡) | **à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸‚à¸­à¸‡à¸§à¸±à¸™à¹„à¸¡à¹ˆà¸„à¸´à¸” energy** |
| 2 | Discount | 10%, 15% discount | **Bonus Energy +20%, +30%** |
| 3 | Streak Break | Reset à¹€à¸›à¹‡à¸™ 0 | **Tier system + Grace Period** |
| 4 | Referral | à¹€à¸›à¸´à¸”à¸•à¸±à¹‰à¸‡à¹à¸•à¹ˆ Phase 1 | **à¹€à¸¥à¸·à¹ˆà¸­à¸™à¹„à¸› Phase 4+ (à¸•à¹‰à¸­à¸‡à¸¡à¸µ account)** |
| 5 | Weekly Challenge | "Use AI 3 times" strict | **à¸™à¸±à¸šà¸£à¸§à¸¡ free AI à¹„à¸”à¹‰ (Phase 1)** |
| 6 | Notification | à¹„à¸¡à¹ˆà¸¡à¸µ | **à¸•à¹‰à¸­à¸‡à¸¡à¸µ! (FCM + Scheduled)** |
| 7 | Comeback | à¹„à¸¡à¹ˆà¸¡à¸µ | **Welcome Back Bonus** |

### à¸ªà¸´à¹ˆà¸‡à¸—à¸µà¹ˆà¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆ:

```
â¬œ Revenue à¸¥à¸”à¸¥à¸‡ ~40% à¸ˆà¸²à¸ "à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸Ÿà¸£à¸µ" â†’ OK à¸¡à¸±à¹‰à¸¢?
â¬œ Streak à¸™à¸±à¸šà¸ˆà¸²à¸ "à¹€à¸›à¸´à¸”à¹à¸­à¸›" à¸«à¸£à¸·à¸­ "à¹ƒà¸Šà¹‰ AI à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸"?
â¬œ Energy Expiry (90 à¸§à¸±à¸™) â†’ à¸—à¸³à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?
â¬œ Comeback Bonus â†’ à¸—à¸³à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?
â¬œ Notification â†’ à¸—à¸³à¹ƒà¸™ Phase à¹„à¸«à¸™?
```

---

## ğŸ¯ E. Revised Implementation Roadmap

```
Phase 1 (Week 1-2): Core â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ“ "à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸‚à¸­à¸‡à¸§à¸±à¸™à¸Ÿà¸£à¸µ" (Cloud Function)
âœ“ Streak Tier system (Bronze â†’ Diamond)
âœ“ Grace Period logic
âœ“ Daily check-in UI

Phase 2 (Week 3-4): Challenges â”â”â”â”â”â”â”â”â”â”â”
âœ“ Weekly challenges (Log meals + Use AI)
âœ“ Milestone rewards (500, 1000 spent)
âœ“ Bonus Energy system (à¹à¸—à¸™ discount)
âœ“ Random daily bonus

Phase 3 (Week 5-6): Admin + Notification â”â”
âœ“ Admin Panel (Cloud Run)
âœ“ Push Notifications (FCM)
âœ“ Fraud detection
âœ“ Config management

Phase 4 (Week 7-8): Account + Referral â”â”â”â”
âœ“ Optional account system (Google/Apple)
âœ“ Referral system (à¸•à¹‰à¸­à¸‡à¸¡à¸µ account)
âœ“ Comeback Bonus
âœ“ A/B Testing

Phase 5 (Week 9+): Subscription â”â”â”â”â”â”â”â”â”â”â”
âœ“ Energy Pass (Subscription)
âœ“ Seasonal Events
âœ“ Social Features
âœ“ Energy Expiry
```
