# In-App Purchase Setup Guide

## Product Details

**Product ID:** `miro_cal_pro`  
**Product Type:** Managed product (Non-consumable)  
**Price:** $9.99 USD (‡∏´‡∏£‡∏∑‡∏≠ 349 THB)

---

## ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô Google Play Console

### 1. ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏≠‡∏õ

- ‡πÑ‡∏õ‡∏ó‡∏µ‡πà: **App pricing ‚Üí Monetization**
- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: **Free**
- Contains ads: **No**
- Contains in-app purchases: **Yes**

### 2. ‡∏™‡∏£‡πâ‡∏≤‡∏á In-App Product

- ‡πÑ‡∏õ‡∏ó‡∏µ‡πà: **Monetize ‚Üí Products ‚Üí In-app products**
- ‡∏Å‡∏î: **Create product**

#### ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:

```
Product ID:          miro_cal_pro
Product name:        Miro Cal Pro - Unlimited AI
```

#### Description (English):

```
Unlock unlimited AI food analysis

‚ú® Features:
‚Ä¢ Unlimited Gemini AI analysis
‚Ä¢ Analyze food photos without limits
‚Ä¢ Chat to log food without limits
‚Ä¢ No ads

Perfect for serious calorie trackers!
```

#### Description (Thai):

```
‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î

‚ú® ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå:
‚Ä¢ ‡πÉ‡∏ä‡πâ Gemini AI ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á
‚Ä¢ ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠
‚Ä¢ ‡πÅ‡∏ä‡∏ó‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î
‚Ä¢ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤

‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà!
```

#### ‡∏£‡∏≤‡∏Ñ‡∏≤:

| Country | Price |
|---------|-------|
| United States | $9.99 USD |
| Thailand | ‡∏ø349 THB |
| *Auto-convert* | *‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏≠‡∏∑‡πà‡∏ô‡πÜ* |

#### Product Type:

- **Managed product** (Non-consumable)
- ‡∏Ñ‡∏∑‡∏≠: ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î

#### Status:

- **Active**

---

## 3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö IAP

### ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ License Tester

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà: **Settings ‚Üí License Testing**
2. ‡πÄ‡∏û‡∏¥‡πà‡∏° Gmail tester: `your.email@gmail.com`
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: **License Response: LICENSED**

### ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏à‡∏£‡∏¥‡∏á

1. Build AAB ‚Üí Upload ‚Üí Internal Testing track
2. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô tester
3. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏à‡∏≤‡∏Å Play Store (Internal Testing)
4. ‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠ Pro (‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á)

---

## 4. Code ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

### UsageLimiter (`lib/core/services/usage_limiter.dart`)

- `canUseAi()` ‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ AI ‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å‡πÑ‡∏´‡∏°
- `recordAiUsage()` ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ AI (‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏´‡∏•‡∏±‡∏á Gemini ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à)
- `isPro()` ‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô Pro user ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- `remainingToday()` ‚Üí ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Å‡∏µ‡πà‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ

### PurchaseService (`lib/core/services/purchase_service.dart`)

- `initialize()` ‚Üí ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô IAP (‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ô main.dart)
- `buyPro()` ‚Üí ‡∏ã‡∏∑‡πâ‡∏≠ Pro
- `restorePurchase()` ‚Üí restore ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á

### UI ‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á Upgrade

- `profile_screen.dart` ‚Üí ‡∏õ‡∏∏‡πà‡∏° "‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î Pro"
- `health_timeline_tab.dart` ‚Üí ‡πÅ‡∏™‡∏î‡∏á remaining usage
- `gemini_analysis_sheet.dart` ‚Üí ‡πÅ‡∏™‡∏î‡∏á upgrade prompt ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏Ñ‡∏£‡∏ö

---

## 5. Testing Checklist

- [ ] Free user ‡πÉ‡∏ä‡πâ AI ‡πÑ‡∏î‡πâ 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏ß‡∏±‡∏ô
- [ ] ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 4 ‚Üí ‡πÅ‡∏™‡∏î‡∏á upgrade prompt
- [ ] ‡∏Å‡∏î‡∏ã‡∏∑‡πâ‡∏≠ Pro ‚Üí Google Play payment sheet ‡πÄ‡∏õ‡∏¥‡∏î
- [ ] ‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚Üí ‡πÅ‡∏™‡∏î‡∏á "Pro" badge ‡πÉ‡∏ô Profile
- [ ] Pro user ‡πÉ‡∏ä‡πâ AI ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î
- [ ] Restore purchase ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ (‡∏•‡∏ö‡πÅ‡∏≠‡∏õ ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏°‡πà)

---

## 6. Important Notes

‚ö†Ô∏è **Product ID ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô:**
- Code: `miro_cal_pro`
- Play Console: `miro_cal_pro`
- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô ‚Üí IAP ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô!

‚ö†Ô∏è **License Testing:**
- ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà‡∏ï‡∏≠‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö
- Production ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ credit card ‡∏à‡∏£‡∏¥‡∏á

‚ö†Ô∏è **Restore Purchase:**
- ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Gmail ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠
- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Gmail ‚Üí ‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÉ‡∏´‡∏°‡πà

---

## 7. Marketing Message

### App Store Description

```
üí∞ ‡∏£‡∏≤‡∏Ñ‡∏≤: ‡∏ü‡∏£‡∏µ (‡∏°‡∏µ In-App Purchase)

‡πÉ‡∏ä‡πâ‡∏ü‡∏£‡∏µ:
‚Ä¢ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠ ‚Äî ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î
‚Ä¢ AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå ‚Äî 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏ß‡∏±‡∏ô

‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î Pro ‡πÄ‡∏û‡∏µ‡∏¢‡∏á $9.99:
‚Ä¢ ‡πÉ‡∏ä‡πâ AI ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á
‚Ä¢ ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÉ‡∏ä‡πâ‡∏ï‡∏•‡∏≠‡∏î
‚Ä¢ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤
```

---

## 8. Revenue Model

**Target:**
- 1,000 users ‚Üí 5% conversion = 50 Pro users
- 50 √ó $9.99 = $499.50/month
- Google Play commission 15-30% (depends on revenue)

**Tips to increase conversion:**
- ‡πÅ‡∏™‡∏î‡∏á "3/3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á" counter ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- ‡∏ó‡∏≥ onboarding ‡πÉ‡∏´‡πâ user ‡∏•‡∏≠‡∏á AI 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô
- ‡πÅ‡∏™‡∏î‡∏á testimonials ‡∏à‡∏≤‡∏Å Pro users
- ‡∏ó‡∏≥ limited-time offer ($9.99 ‚Üí $6.99 first week)

---

## 9. Next Steps

1. ‡∏™‡∏£‡πâ‡∏≤‡∏á In-App Product ‡πÉ‡∏ô Play Console
2. Upload AAB ‚Üí Internal Testing
3. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö IAP flow
4. Fix bugs (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
5. Promote to Production
6. Monitor conversion rate

---

**Good luck! üöÄ**
