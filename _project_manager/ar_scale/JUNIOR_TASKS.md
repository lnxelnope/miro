# Junior Tasks ‚Äî AR Scale Ruler System

> **‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:** Junior Developer  
> **‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:** ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà + ‡πÅ‡∏Å‡πâ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°‡∏ï‡∏≤‡∏° spec  
> **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å:** ‡∏á‡πà‡∏≤‡∏¢, ‡∏°‡∏µ step-by-step ‡∏ó‡∏∏‡∏Å‡∏Ç‡∏±‡πâ‡∏ô, copy-paste ‡πÑ‡∏î‡πâ  
> **‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:** 1 ‡∏°‡∏µ.‡∏Ñ. 2026

---

## üìä ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞

```
‡∏á‡∏≤‡∏ô Junior ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß‡πÇ‡∏î‡∏¢ Senior
Junior ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö + ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ï‡∏≤‡∏° checklist ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á
```

### ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà Senior ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß ‚úÖ

| ‡πÑ‡∏ü‡∏•‡πå | ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ |
|------|--------|
| `lib/core/ar_scale/constants/ar_scale_enums.dart` | ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß |
| `lib/core/ar_scale/constants/reference_objects_data.dart` | ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß |
| `lib/core/ar_scale/models/bounding_box_data.dart` | ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß |
| `lib/core/ar_scale/models/reference_object.dart` | ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß |
| `lib/core/ar_scale/models/calibration_result.dart` | ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß |
| `lib/core/ar_scale/widgets/calibration_badge.dart` | ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß |
| `lib/core/ar_scale/widgets/reference_guide_tip.dart` | ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß |
| `lib/core/ar_scale/widgets/ar_ruler_overlay.dart` | ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß |
| `lib/core/ar_scale/widgets/reference_object_indicator.dart` | ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß |
| `lib/core/ar_scale/services/scale_calibration_service.dart` | ‚úÖ Shell (TODO ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Senior) |
| `lib/core/ar_scale/services/reference_detector_service.dart` | ‚úÖ Shell (TODO ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Senior) |
| `lib/core/ar_scale/services/camera_frame_processor.dart` | ‚úÖ Shell (TODO ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Senior) |
| `FoodAnalysisResult` ‡πÉ‡∏ô `gemini_service.dart` | ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° fields ‡πÅ‡∏•‡πâ‡∏ß |
| `FoodEntry` ‡πÉ‡∏ô `food_entry.dart` | ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° fields ‡πÅ‡∏•‡πâ‡∏ß |
| `pubspec.yaml` | ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° `google_mlkit_object_detection` ‡πÅ‡∏•‡πâ‡∏ß |

---

## üîß ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà Junior ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥

### J1. Regenerate Isar Schema (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å!)

‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏° fields ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô `FoodEntry` ‡∏ï‡πâ‡∏≠‡∏á regenerate Isar:

```bash
# ‡∏ó‡∏µ‡πà root ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
dart run build_runner build --delete-conflicting-outputs
```

**‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:** ‡πÑ‡∏ü‡∏•‡πå `food_entry.g.dart` ‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏π‡∏Å regenerate

---

### J2. ‡πÄ‡∏û‡∏¥‡πà‡∏° CalibrationBadge ‡πÉ‡∏ô food_timeline_card.dart

**‡πÑ‡∏ü‡∏•‡πå:** `lib/features/health/widgets/food_timeline_card.dart`

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:** ‡∏´‡∏•‡∏±‡∏á food name (‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å Text ‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£)

**‡πÄ‡∏û‡∏¥‡πà‡∏° import:**
```dart
import 'package:miro_hybrid/core/ar_scale/widgets/calibration_badge.dart';
import 'package:miro_hybrid/core/ar_scale/constants/ar_scale_enums.dart';
```

**‡πÄ‡∏û‡∏¥‡πà‡∏° widget:** ‡∏´‡∏•‡∏±‡∏á food name text
```dart
// ‡∏ñ‡πâ‡∏≤ entry ‡∏°‡∏µ calibration ‚Üí ‡πÅ‡∏™‡∏î‡∏á badge
if (entry.isCalibrated) ...[
  const SizedBox(width: 4),
  CalibrationBadge(
    tier: entry.referenceConfidence != null && entry.referenceConfidence! >= 0.85
        ? CalibrationTier.high
        : CalibrationTier.medium,
    plateDiameterCm: entry.plateDiameterCm,
    compact: true,
  ),
],
```

---

### J3. ‡πÄ‡∏û‡∏¥‡πà‡∏° ReferenceGuideTip ‡πÉ‡∏ô image_analysis_preview_screen.dart

**‡πÑ‡∏ü‡∏•‡πå:** `lib/features/health/presentation/image_analysis_preview_screen.dart`

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:** ‡πÉ‡∏ï‡πâ‡∏£‡∏π‡∏õ preview (‡∏´‡∏•‡∏±‡∏á Image widget)

**‡πÄ‡∏û‡∏¥‡πà‡∏° import:**
```dart
import 'package:miro_hybrid/core/ar_scale/widgets/reference_guide_tip.dart';
```

**‡πÄ‡∏û‡∏¥‡πà‡∏° widget:** ‡πÉ‡∏ï‡πâ‡∏£‡∏π‡∏õ preview
```dart
// ‡πÅ‡∏™‡∏î‡∏á tip ‡πÉ‡∏´‡πâ‡∏ß‡∏≤‡∏á‡∏ä‡πâ‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏à‡∏≤‡∏ô
if (_currentImageFile != null) ...[
  const SizedBox(height: 8),
  const ReferenceGuideTip(compact: true),
],
```

---

### J4. ‡πÄ‡∏û‡∏¥‡πà‡∏° CameraReferenceGuideTip ‡πÉ‡∏ô camera_screen.dart

**‡πÑ‡∏ü‡∏•‡πå:** `lib/features/camera/presentation/camera_screen.dart`

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:** ‡πÉ‡∏ô Stack, ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Top Bar ‡∏Å‡∏±‡∏ö Bottom Controls

**‡πÄ‡∏û‡∏¥‡πà‡∏° import:**
```dart
import 'package:miro_hybrid/core/ar_scale/widgets/reference_guide_tip.dart';
```

**‡πÄ‡∏û‡∏¥‡πà‡∏° widget:** ‡πÉ‡∏ô Stack ‡∏Å‡πà‡∏≠‡∏ô Bottom Controls
```dart
// AR Scale tip
Positioned(
  bottom: 140,
  left: 0,
  right: 0,
  child: Center(
    child: CameraReferenceGuideTip(),
  ),
),
```

---

### J5. ‡πÄ‡∏û‡∏¥‡πà‡∏° CalibrationBadge ‡πÉ‡∏ô gemini_analysis_sheet.dart

**‡πÑ‡∏ü‡∏•‡πå:** `lib/features/health/widgets/gemini_analysis_sheet.dart`

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:** ‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á food name ‚Üí ‡πÄ‡∏û‡∏¥‡πà‡∏° badge ‡∏Ç‡πâ‡∏≤‡∏á‡πÜ

**‡πÄ‡∏û‡∏¥‡πà‡∏° import:**
```dart
import 'package:miro_hybrid/core/ar_scale/widgets/calibration_badge.dart';
import 'package:miro_hybrid/core/ar_scale/constants/ar_scale_enums.dart';
```

**‡πÄ‡∏û‡∏¥‡πà‡∏° widget:** ‡∏Ç‡πâ‡∏≤‡∏á food name
```dart
// ‡πÅ‡∏™‡∏î‡∏á calibration badge ‡∏ñ‡πâ‡∏≤ AI ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö reference object ‡πÑ‡∏î‡πâ
if (result.isCalibrated) ...[
  const SizedBox(width: 6),
  CalibrationBadge(
    tier: (result.referenceConfidence ?? 0) >= 0.85
        ? CalibrationTier.high
        : CalibrationTier.medium,
    plateDiameterCm: result.plateDiameterCm,
  ),
],
```

---

### J6. ‡πÄ‡∏û‡∏¥‡πà‡∏° Calibration fields ‡πÉ‡∏ô applyResultToEntry

**‡πÑ‡∏ü‡∏•‡πå:** ‡∏´‡∏≤‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà apply `FoodAnalysisResult` ‡∏•‡∏á `FoodEntry`  
(‡∏≠‡∏≤‡∏à‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô `health_provider.dart` ‡∏´‡∏£‡∏∑‡∏≠ `batch_analysis_helper.dart`)

**‡∏´‡∏≤ pattern ‡∏ô‡∏µ‡πâ:** ‡∏à‡∏∞‡∏°‡∏µ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà set ‡∏Ñ‡πà‡∏≤ entry ‡∏à‡∏≤‡∏Å result ‡πÄ‡∏ä‡πà‡∏ô:
```dart
entry.calories = result.nutrition.calories;
entry.protein = result.nutrition.protein;
// ... etc
```

**‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢:**
```dart
// AR Scale calibration data
entry.referenceObjectUsed = result.referenceObjectUsed;
entry.referenceConfidence = result.referenceConfidence;
entry.plateDiameterCm = result.plateDiameterCm;
entry.estimatedVolumeMl = result.estimatedVolumeMl;
entry.isCalibrated = result.isCalibrated;
```

---

### J7. Export barrel file

**‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà:** `lib/core/ar_scale/ar_scale.dart`

```dart
// AR Scale Ruler System ‚Äî Barrel Export
export 'constants/ar_scale_enums.dart';
export 'constants/reference_objects_data.dart';
export 'models/bounding_box_data.dart';
export 'models/reference_object.dart';
export 'models/calibration_result.dart';
export 'widgets/calibration_badge.dart';
export 'widgets/reference_guide_tip.dart';
export 'widgets/ar_ruler_overlay.dart';
export 'widgets/reference_object_indicator.dart';
export 'services/scale_calibration_service.dart';
export 'services/reference_detector_service.dart';
export 'services/camera_frame_processor.dart';
```

---

## ‚úÖ Checklist

‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß check ‚úÖ ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢:

- [ ] J1: `dart run build_runner build` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Isar schema
- [ ] J2: ‡πÄ‡∏û‡∏¥‡πà‡∏° `CalibrationBadge` ‡πÉ‡∏ô `food_timeline_card.dart`
- [ ] J3: ‡πÄ‡∏û‡∏¥‡πà‡∏° `ReferenceGuideTip` ‡πÉ‡∏ô `image_analysis_preview_screen.dart`
- [ ] J4: ‡πÄ‡∏û‡∏¥‡πà‡∏° `CameraReferenceGuideTip` ‡πÉ‡∏ô `camera_screen.dart`
- [ ] J5: ‡πÄ‡∏û‡∏¥‡πà‡∏° `CalibrationBadge` ‡πÉ‡∏ô `gemini_analysis_sheet.dart`
- [ ] J6: ‡πÄ‡∏û‡∏¥‡πà‡∏° calibration fields ‡πÉ‡∏ô `applyResultToEntry`
- [ ] J7: ‡∏™‡∏£‡πâ‡∏≤‡∏á barrel export file
- [ ] Build test: `flutter analyze` ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ error ‡πÉ‡∏´‡∏°‡πà
- [ ] Run: app ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥ (calibration ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÅ‡∏Ñ‡πà‡∏°‡∏µ UI ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ß‡πâ)

---

## ‚ö†Ô∏è ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà Junior ‡∏´‡πâ‡∏≤‡∏°‡∏ó‡∏≥ (Senior ‡∏à‡∏∞‡∏ó‡∏≥‡πÄ‡∏≠‡∏á)

1. ‚ùå **‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç** service files ‡∏ó‡∏µ‡πà‡∏°‡∏µ `TODO: [SENIOR]`
2. ‚ùå **‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏Å‡πâ** Gemini prompts ‡πÉ‡∏ô `gemini_service.dart`
3. ‚ùå **‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°** `startImageStream` ‡πÉ‡∏ô `camera_screen.dart`
4. ‚ùå **‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏Å‡πâ** `batch_analysis_helper.dart` logic
5. ‚ùå **‡∏´‡πâ‡∏≤‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á** Riverpod providers ‡πÉ‡∏ô `ar_scale/providers/`

---

## üìù ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏

- ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà Senior ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ **compile ‡πÑ‡∏î‡πâ** ‡πÅ‡∏ï‡πà service ‡∏à‡∏∞ return null/empty ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà implement logic
- Widget ‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß **‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÑ‡∏î‡πâ** ‡πÅ‡∏Ñ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ data ‡∏à‡∏£‡∏¥‡∏á (‡πÅ‡∏™‡∏î‡∏á empty/placeholder)
- ‡∏´‡∏•‡∏±‡∏á Junior ‡∏ó‡∏≥ J1-J7 ‡πÄ‡∏™‡∏£‡πá‡∏à ‚Üí ‡πÅ‡∏à‡πâ‡∏á Senior ‡∏°‡∏≤‡∏ï‡∏£‡∏ß‡∏à + implement logic
